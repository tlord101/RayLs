const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BiSao9nZ.js","assets/index-CCMp9v2r.js","assets/index-DPiLMoKP.css","assets/hashTypedData-DCkVURQm.js"])))=>i.map(i=>d[i]);
import{af as O,ah as jt,an as T,aJ as Dt,as as D,aI as re,aG as Ie,aK as Ki,av as ae,aF as Ae,ag as Ce,at as ge,aL as Yi,aM as Ji,ay as me,aN as Xi,aO as Qi,aP as rr,aQ as ea,ai as bt,aj as Ue,aR as Hs,aS as Ft,aT as nt,aU as Vr,aV as qr,aW as Zr,aX as Wr,aY as Kr,aZ as Yr,a_ as Jr,a$ as Xr,b0 as zt,b1 as xt,b2 as Qr,ak as js,b3 as ta,b4 as _t,b5 as es,b6 as Ds,b7 as Rn,b8 as na,b9 as zn,al as lt,ba as ts,bb as Vs,bc as ns,bd as ra,ax as pn,ar as sa,ap as oa,be as qs,bf as rs,bg as ia}from"./index-CCMp9v2r.js";import{f as Re,g as Zs,j as Ws,l as Ks,m as st,A as ss,n as Ve,t as sr,k as Me,d as vt,o as Pt,p as Ys,q as Js,r as aa,u as Xs,v as ca,s as ht,w as or,x as Qs,c as le,i as se,I as ce,H as eo,y as mn,z as Ot,B as to,C as no,D as ua,E as Lt,F as fa,G as he,e as be,J as da,K as ro,L as Vt,M as pt,N as Ut,O as so,P as la,Q as os,R as is,S as ba,T as as,U as ha,V as pa,b as oo,W as ma,X as ya,Y as ga,Z as wa,_ as xa,$ as va,a0 as io,a1 as Pa,a2 as Ea,a3 as Ba,a4 as Ia,a5 as Aa,a6 as $a,a7 as _n,h as ao,a as Sa}from"./hashTypedData-DCkVURQm.js";const Ta="1.1.0";let J=class On extends Error{constructor(t,n={}){const r=n.cause instanceof On?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof On&&n.cause.docsPath||n.docsPath,o=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Ta}`].join(`
`);super(o),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=t}};const co=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Na(e){return co.test(e)}function ka(e){return Re(co,e)}const uo=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Fa(e){return uo.test(e)}function Ca(e){return Re(uo,e)}const fo=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Ra(e){return fo.test(e)}function za(e){return Re(fo,e)}const lo=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function qt(e){return lo.test(e)}function _a(e){return Re(lo,e)}const bo=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Oa(e){return bo.test(e)}function La(e){return Re(bo,e)}const ho=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Ua(e){return ho.test(e)}function Ma(e){return Re(ho,e)}const Ga=/^receive\(\) external payable$/;function Ha(e){return Ga.test(e)}const cs=new Set(["memory","indexed","storage","calldata"]),ja=new Set(["indexed"]),Ln=new Set(["calldata","memory","storage"]);class Da extends J{constructor({signature:t}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class Va extends J{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class qa extends J{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Za extends J{constructor({params:t}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class Wa extends J{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Ka extends J{constructor({param:t,name:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class Ya extends J{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Ja extends J{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class Xa extends J{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class ot extends J{constructor({signature:t,type:n}){super(`Invalid ${n} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Qa extends J{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class e0 extends J{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class t0 extends J{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class n0 extends J{constructor({current:t,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function r0(e,t,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let o="";for(const i of s[1])o+=`[${i.type}${i.name?`:${i.name}`:""}]`;r+=`(${s[0]}{${o}})`}return t?`${t}:${e}${r}`:e}const yn=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function Un(e,t={}){if(Ra(e))return s0(e,t);if(Fa(e))return o0(e,t);if(Na(e))return i0(e,t);if(Oa(e))return a0(e,t);if(Ua(e))return c0(e);if(Ha(e))return{type:"receive",stateMutability:"payable"};throw new Qa({signature:e})}function s0(e,t={}){const n=za(e);if(!n)throw new ot({signature:e,type:"function"});const r=X(n.parameters),s=[],o=r.length;for(let c=0;c<o;c++)s.push($e(r[c],{modifiers:Ln,structs:t,type:"function"}));const i=[];if(n.returns){const c=X(n.returns),a=c.length;for(let u=0;u<a;u++)i.push($e(c[u],{modifiers:Ln,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:i}}function o0(e,t={}){const n=Ca(e);if(!n)throw new ot({signature:e,type:"event"});const r=X(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push($e(r[i],{modifiers:ja,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:s}}function i0(e,t={}){const n=ka(e);if(!n)throw new ot({signature:e,type:"error"});const r=X(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push($e(r[i],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:s}}function a0(e,t={}){const n=La(e);if(!n)throw new ot({signature:e,type:"constructor"});const r=X(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push($e(r[i],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function c0(e){const t=Ma(e);if(!t)throw new ot({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}const u0=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,f0=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,d0=/^u?int$/;function $e(e,t){const n=r0(e,t?.type,t?.structs);if(yn.has(n))return yn.get(n);const r=Ks.test(e),s=Re(r?f0:u0,e);if(!s)throw new Wa({param:e});if(s.name&&b0(s.name))throw new Ka({param:e,name:s.name});const o=s.name?{name:s.name}:{},i=s.modifier==="indexed"?{indexed:!0}:{},c=t?.structs??{};let a,u={};if(r){a="tuple";const d=X(s.type),l=[],b=d.length;for(let m=0;m<b;m++)l.push($e(d[m],{structs:c}));u={components:l}}else if(s.type in c)a="tuple",u={components:c[s.type]};else if(d0.test(s.type))a=`${s.type}256`;else if(s.type==="address payable")a="address";else if(a=s.type,t?.type!=="struct"&&!po(a))throw new qa({type:a});if(s.modifier){if(!t?.modifiers?.has?.(s.modifier))throw new Ya({param:e,type:t?.type,modifier:s.modifier});if(Ln.has(s.modifier)&&!h0(a,!!s.array))throw new Ja({param:e,type:t?.type,modifier:s.modifier})}const f={type:`${a}${s.array??""}`,...o,...i,...u};return yn.set(n,f),f}function X(e,t=[],n="",r=0){const s=e.trim().length;for(let o=0;o<s;o++){const i=e[o],c=e.slice(o+1);switch(i){case",":return r===0?X(c,[...t,n.trim()]):X(c,t,`${n}${i}`,r);case"(":return X(c,t,`${n}${i}`,r+1);case")":return X(c,t,`${n}${i}`,r-1);default:return X(c,t,`${n}${i}`,r)}}if(n==="")return t;if(r!==0)throw new n0({current:n,depth:r});return t.push(n.trim()),t}function po(e){return e==="address"||e==="bool"||e==="function"||e==="string"||Zs.test(e)||Ws.test(e)}const l0=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function b0(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||Zs.test(e)||Ws.test(e)||l0.test(e)}function h0(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}function ir(e){const t={},n=e.length;for(let i=0;i<n;i++){const c=e[i];if(!qt(c))continue;const a=_a(c);if(!a)throw new ot({signature:c,type:"struct"});const u=a.properties.split(";"),f=[],d=u.length;for(let l=0;l<d;l++){const m=u[l].trim();if(!m)continue;const p=$e(m,{type:"struct"});f.push(p)}if(!f.length)throw new e0({signature:c});t[a.name]=f}const r={},s=Object.entries(t),o=s.length;for(let i=0;i<o;i++){const[c,a]=s[i];r[c]=mo(a,t)}return r}const p0=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function mo(e,t,n=new Set){const r=[],s=e.length;for(let o=0;o<s;o++){const i=e[o];if(Ks.test(i.type))r.push(i);else{const a=Re(p0,i.type);if(!a?.type)throw new Xa({abiParameter:i});const{array:u,type:f}=a;if(f in t){if(n.has(f))throw new t0({type:f});r.push({...i,type:`tuple${u??""}`,components:mo(t[f]??[],t,new Set([...n,f]))})}else if(po(f))r.push(i);else throw new Va({type:f})}}return r}function yo(e){const t=ir(e),n=[],r=e.length;for(let s=0;s<r;s++){const o=e[s];qt(o)||n.push(Un(o,t))}return n}function us(e){let t;if(typeof e=="string")t=Un(e);else{const n=ir(e),r=e.length;for(let s=0;s<r;s++){const o=e[s];if(!qt(o)){t=Un(o,n);break}}}if(!t)throw new Da({signature:e});return t}function fs(e){const t=[];if(typeof e=="string"){const n=X(e),r=n.length;for(let s=0;s<r;s++)t.push($e(n[s],{modifiers:cs}))}else{const n=ir(e),r=e.length;for(let s=0;s<r;s++){const o=e[s];if(qt(o))continue;const i=X(o),c=i.length;for(let a=0;a<c;a++)t.push($e(i[a],{modifiers:cs,structs:n}))}}if(t.length===0)throw new Za({params:e});return t}function _(e,t,n){const r=e[t.name];if(typeof r=="function")return r;const s=e[n];return typeof s=="function"?s:o=>t(e,o)}class m0 extends O{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const ds="/docs/contract/encodeEventTopics";function Et(e){const{abi:t,eventName:n,args:r}=e;let s=t[0];if(n){const a=st({abi:t,name:n});if(!a)throw new ss(n,{docsPath:ds});s=a}if(s.type!=="event")throw new ss(void 0,{docsPath:ds});const o=Ve(s),i=sr(o);let c=[];if(r&&"inputs"in s){const a=s.inputs?.filter(f=>"indexed"in f&&f.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?a?.map(f=>r[f.name])??[]:[];u.length>0&&(c=a?.map((f,d)=>Array.isArray(u[d])?u[d].map((l,b)=>ls({param:f,value:u[d][b]})):typeof u[d]<"u"&&u[d]!==null?ls({param:f,value:u[d]}):null)??[])}return[i,...c]}function ls({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return Me(jt(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new m0(e.type);return vt([e],[t])}function Zt(e,{method:t}){const n={};return e.transport.type==="fallback"&&e.transport.onResponse?.(({method:r,response:s,status:o,transport:i})=>{o==="success"&&t===r&&(n[s]=i.request)}),(r=>n[r]||e.request)}async function go(e,t){const{address:n,abi:r,args:s,eventName:o,fromBlock:i,strict:c,toBlock:a}=t,u=Zt(e,{method:"eth_newFilter"}),f=o?Et({abi:r,args:s,eventName:o}):void 0,d=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof i=="bigint"?T(i):i,toBlock:typeof a=="bigint"?T(a):a,topics:f}]});return{abi:r,args:s,eventName:o,id:d,request:u(d),strict:!!c,type:"event"}}function Q(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}const y0={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},wo={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},g0={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};let bs=class extends O{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}},xo=class extends O{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}},w0=class extends O{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}};const x0={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new w0({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new xo({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new bs({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new bs({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function ar(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(x0);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}function v0(e,t={}){typeof t.size<"u"&&Dt(e,{size:t.size});const n=D(e,t);return ae(n,t)}function P0(e,t={}){let n=e;if(typeof t.size<"u"&&(Dt(n,{size:t.size}),n=Ie(n)),n.length>1||n[0]>1)throw new Ki(n);return!!n[0]}function Ee(e,t={}){typeof t.size<"u"&&Dt(e,{size:t.size});const n=D(e,t);return re(n,t)}function E0(e,t={}){let n=e;return typeof t.size<"u"&&(Dt(n,{size:t.size}),n=Ie(n,{dir:"right"})),new TextDecoder().decode(n)}function Bt(e,t){const n=typeof t=="string"?Ae(t):t,r=ar(n);if(Ce(n)===0&&e.length>0)throw new Pt;if(Ce(t)&&Ce(t)<32)throw new Ys({data:typeof t=="string"?t:D(t),params:e,size:Ce(t)});let s=0;const o=[];for(let i=0;i<e.length;++i){const c=e[i];r.setPosition(s);const[a,u]=Qe(r,c,{staticPosition:0});s+=u,o.push(a)}return o}function Qe(e,t,{staticPosition:n}){const r=Js(t.type);if(r){const[s,o]=r;return I0(e,{...t,type:o},{length:s,staticPosition:n})}if(t.type==="tuple")return T0(e,t,{staticPosition:n});if(t.type==="address")return B0(e);if(t.type==="bool")return A0(e);if(t.type.startsWith("bytes"))return $0(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return S0(e,t);if(t.type==="string")return N0(e,{staticPosition:n});throw new aa(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const hs=32,Mn=32;function B0(e){const t=e.readBytes(32);return[Xs(D(ca(t,-20))),32]}function I0(e,t,{length:n,staticPosition:r}){if(!n){const i=Ee(e.readBytes(Mn)),c=r+i,a=c+hs;e.setPosition(c);const u=Ee(e.readBytes(hs)),f=mt(t);let d=0;const l=[];for(let b=0;b<u;++b){e.setPosition(a+(f?b*32:d));const[m,p]=Qe(e,t,{staticPosition:a});d+=p,l.push(m)}return e.setPosition(r+32),[l,32]}if(mt(t)){const i=Ee(e.readBytes(Mn)),c=r+i,a=[];for(let u=0;u<n;++u){e.setPosition(c+u*32);const[f]=Qe(e,t,{staticPosition:c});a.push(f)}return e.setPosition(r+32),[a,32]}let s=0;const o=[];for(let i=0;i<n;++i){const[c,a]=Qe(e,t,{staticPosition:r+s});s+=a,o.push(c)}return[o,s]}function A0(e){return[P0(e.readBytes(32),{size:32}),32]}function $0(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const i=Ee(e.readBytes(32));e.setPosition(n+i);const c=Ee(e.readBytes(32));if(c===0)return e.setPosition(n+32),["0x",32];const a=e.readBytes(c);return e.setPosition(n+32),[D(a),32]}return[D(e.readBytes(Number.parseInt(s,10),32)),32]}function S0(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),s=e.readBytes(32);return[r>48?v0(s,{signed:n}):Ee(s,{signed:n}),32]}function T0(e,t,{staticPosition:n}){const r=t.components.length===0||t.components.some(({name:i})=>!i),s=r?[]:{};let o=0;if(mt(t)){const i=Ee(e.readBytes(Mn)),c=n+i;for(let a=0;a<t.components.length;++a){const u=t.components[a];e.setPosition(c+o);const[f,d]=Qe(e,u,{staticPosition:c});o+=d,s[r?a:u?.name]=f}return e.setPosition(n+32),[s,32]}for(let i=0;i<t.components.length;++i){const c=t.components[i],[a,u]=Qe(e,c,{staticPosition:n});s[r?i:c?.name]=a,o+=u}return[s,o]}function N0(e,{staticPosition:t}){const n=Ee(e.readBytes(32)),r=t+n;e.setPosition(r);const s=Ee(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const o=e.readBytes(s,32),i=E0(Ie(o));return e.setPosition(t+32),[i,32]}function mt(e){const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return e.components?.some(mt);const n=Js(e.type);return!!(n&&mt({...e,type:n[1]}))}function k0(e){const{abi:t,data:n}=e,r=ht(n,0,4);if(r==="0x")throw new Pt;const o=[...t||[],wo,g0].find(i=>i.type==="error"&&r===or(Ve(i)));if(!o)throw new Qs(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:o,args:"inputs"in o&&o.inputs&&o.inputs.length>0?Bt(o.inputs,ht(n,4)):void 0,errorName:o.name}}function vo({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((s,o)=>`${r&&s.name?`${s.name}: `:""}${typeof t[o]=="object"?ge(t[o]):t[o]}`).join(", ")})`}function cr(e,t="wei"){return Yi(e,Ji[t])}class F0 extends O{constructor({address:t}){super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}}class C0 extends O{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function ps(e){return e.reduce((t,{slot:n,value:r})=>`${t}        ${n}: ${r}
`,"")}function R0(e){return e.reduce((t,{address:n,...r})=>{let s=`${t}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=ps(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=ps(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function It(e){const t=Object.entries(e).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=t.reduce((r,[s])=>Math.max(r,s.length),0);return t.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class z0 extends O{constructor({v:t}){super(`Invalid \`v\` value "${t}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class _0 extends O{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",It(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class O0 extends O{constructor({storageKey:t}){super(`Size for storage key "${t}" is invalid. Expected 32 bytes. Got ${Math.floor((t.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class L0 extends O{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:i,gasPrice:c,maxFeePerGas:a,maxPriorityFeePerGas:u,nonce:f,to:d,value:l}){const b=It({chain:s&&`${s?.name} (id: ${s?.id})`,from:n?.address,to:d,value:typeof l<"u"&&`${cr(l)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:i,gasPrice:typeof c<"u"&&`${me(c)} gwei`,maxFeePerGas:typeof a<"u"&&`${me(a)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${me(u)} gwei`,nonce:f});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",b].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Po extends O{constructor({blockHash:t,blockNumber:n,blockTag:r,hash:s,index:o}){let i="Transaction";r&&o!==void 0&&(i=`Transaction at block time "${r}" at index "${o}"`),t&&o!==void 0&&(i=`Transaction at block hash "${t}" at index "${o}"`),n&&o!==void 0&&(i=`Transaction at block number "${n}" at index "${o}"`),s&&(i=`Transaction with hash "${s}"`),super(`${i} could not be found.`,{name:"TransactionNotFoundError"})}}class Eo extends O{constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class U0 extends O{constructor({receipt:t}){super(`Transaction with hash "${t.transactionHash}" reverted.`,{metaMessages:['The receipt marked the transaction as "reverted". This could mean that the function on the contract you are trying to call threw an error.'," ","You can attempt to extract the revert reason by:","- calling the `simulateContract` or `simulateCalls` Action with the `abi` and `functionName` of the contract","- using the `call` Action with raw `data`"],name:"TransactionReceiptRevertedError"}),Object.defineProperty(this,"receipt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.receipt=t}}class M0 extends O{constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}class Bo extends O{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:i,gasPrice:c,maxFeePerGas:a,maxPriorityFeePerGas:u,nonce:f,to:d,value:l,stateOverride:b}){const m=n?Q(n):void 0;let p=It({from:m?.address,to:d,value:typeof l<"u"&&`${cr(l)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:i,gasPrice:typeof c<"u"&&`${me(c)} gwei`,maxFeePerGas:typeof a<"u"&&`${me(a)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${me(u)} gwei`,nonce:f});b&&(p+=`
${R0(b)}`),super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",p].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Io extends O{constructor(t,{abi:n,args:r,contractAddress:s,docsPath:o,functionName:i,sender:c}){const a=st({abi:n,args:r,name:i}),u=a?vo({abiItem:a,args:r,includeFunctionName:!1,includeName:!1}):void 0,f=a?Ve(a,{includeName:!0}):void 0,d=It({address:s&&Xi(s),function:f,args:u&&u!=="()"&&`${[...Array(i?.length??0).keys()].map(()=>" ").join("")}${u}`,sender:c});super(t.shortMessage||`An unknown error occurred while executing the contract function "${i}".`,{cause:t,docsPath:o,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=t,this.contractAddress=s,this.functionName=i,this.sender=c}}class Gn extends O{constructor({abi:t,data:n,functionName:r,message:s}){let o,i,c,a;if(n&&n!=="0x")try{i=k0({abi:t,data:n});const{abiItem:f,errorName:d,args:l}=i;if(d==="Error")a=l[0];else if(d==="Panic"){const[b]=l;a=y0[b]}else{const b=f?Ve(f,{includeName:!0}):void 0,m=f&&l?vo({abiItem:f,args:l,includeFunctionName:!1,includeName:!1}):void 0;c=[b?`Error: ${b}`:"",m&&m!=="()"?`       ${[...Array(d?.length??0).keys()].map(()=>" ").join("")}${m}`:""]}}catch(f){o=f}else s&&(a=s);let u;o instanceof Qs&&(u=o.signature,c=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(a&&a!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,a||u].join(`
`):`The contract function "${r}" reverted.`,{cause:o,metaMessages:c,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=i,this.raw=n,this.reason=a,this.signature=u}}class G0 extends O{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class H0 extends O{constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class Wt extends O{constructor({data:t,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}const j0=3;function rt(e,{abi:t,address:n,args:r,docsPath:s,functionName:o,sender:i}){const c=e instanceof Wt?e:e instanceof O?e.walk(m=>"data"in m)||e.walk():{},{code:a,data:u,details:f,message:d,shortMessage:l}=c,b=e instanceof Pt?new G0({functionName:o}):[j0,Qi.code].includes(a)&&(u||f||d||l)||a===rr.code&&f==="execution reverted"&&u?new Gn({abi:t,data:typeof u=="object"?u.data:u,functionName:o,message:c instanceof ea?f:l??d}):e;return new Io(b,{abi:t,args:r,contractAddress:n,docsPath:s,functionName:o,sender:i})}function D0(e){const t=Me(`0x${e.substring(4)}`).substring(26);return Xs(`0x${t}`)}async function V0({hash:e,signature:t}){const n=bt(e)?e:Ue(e),{secp256k1:r}=await Hs(async()=>{const{secp256k1:i}=await Promise.resolve().then(()=>bd);return{secp256k1:i}},void 0);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:u,s:f,v:d,yParity:l}=t,b=Number(l??d),m=ms(b);return new r.Signature(ae(u),ae(f)).addRecoveryBit(m)}const i=bt(t)?t:Ue(t);if(Ce(i)!==65)throw new Error("invalid signature length");const c=re(`0x${i.slice(130)}`),a=ms(c);return r.Signature.fromCompact(i.substring(2,130)).addRecoveryBit(a)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function ms(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function Ao({hash:e,signature:t}){return D0(await V0({hash:e,signature:t}))}function Ge(e,t="hex"){const n=$o(e),r=ar(new Uint8Array(n.length));return n.encode(r),t==="hex"?D(r.bytes):r.bytes}function $o(e){return Array.isArray(e)?q0(e.map(t=>$o(t))):Z0(e)}function q0(e){const t=e.reduce((s,o)=>s+o.length,0),n=So(t);return{length:t<=55?1+t:1+n+t,encode(s){t<=55?s.pushByte(192+t):(s.pushByte(247+n),n===1?s.pushUint8(t):n===2?s.pushUint16(t):n===3?s.pushUint24(t):s.pushUint32(t));for(const{encode:o}of e)o(s)}}}function Z0(e){const t=typeof e=="string"?Ae(e):e,n=So(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(s){t.length===1&&t[0]<128?s.pushBytes(t):t.length<=55?(s.pushByte(128+t.length),s.pushBytes(t)):(s.pushByte(183+n),n===1?s.pushUint8(t.length):n===2?s.pushUint16(t.length):n===3?s.pushUint24(t.length):s.pushUint32(t.length),s.pushBytes(t))}}}function So(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new O("Length is too large.")}function W0(e){const{chainId:t,nonce:n,to:r}=e,s=e.contractAddress??e.address,o=Me(le(["0x05",Ge([t?T(t):"0x",s,n?T(n):"0x"])]));return r==="bytes"?Ae(o):o}async function To(e){const{authorization:t,signature:n}=e;return Ao({hash:W0(t),signature:n??t})}class K0 extends O{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:i,gasPrice:c,maxFeePerGas:a,maxPriorityFeePerGas:u,nonce:f,to:d,value:l}){const b=It({from:n?.address,to:d,value:typeof l<"u"&&`${cr(l)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:i,gasPrice:typeof c<"u"&&`${me(c)} gwei`,maxFeePerGas:typeof a<"u"&&`${me(a)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${me(u)} gwei`,nonce:f});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",b].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}function Kt(e,t){const n=(e.details||"").toLowerCase(),r=e instanceof O?e.walk(s=>s?.code===Ft.code):e;return r instanceof O?new Ft({cause:e,message:r.details}):Ft.nodeMessage.test(n)?new Ft({cause:e,message:e.details}):nt.nodeMessage.test(n)?new nt({cause:e,maxFeePerGas:t?.maxFeePerGas}):Vr.nodeMessage.test(n)?new Vr({cause:e,maxFeePerGas:t?.maxFeePerGas}):qr.nodeMessage.test(n)?new qr({cause:e,nonce:t?.nonce}):Zr.nodeMessage.test(n)?new Zr({cause:e,nonce:t?.nonce}):Wr.nodeMessage.test(n)?new Wr({cause:e,nonce:t?.nonce}):Kr.nodeMessage.test(n)?new Kr({cause:e}):Yr.nodeMessage.test(n)?new Yr({cause:e,gas:t?.gas}):Jr.nodeMessage.test(n)?new Jr({cause:e,gas:t?.gas}):Xr.nodeMessage.test(n)?new Xr({cause:e}):zt.nodeMessage.test(n)?new zt({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new xt({cause:e})}function Y0(e,{docsPath:t,...n}){const r=(()=>{const s=Kt(e,n);return s instanceof xt?e:s})();return new K0(r,{docsPath:t,...n})}function Yt(e,{format:t}){if(!t)return{};const n={};function r(o){const i=Object.keys(o);for(const c of i)c in e&&(n[c]=e[c]),o[c]&&typeof o[c]=="object"&&!Array.isArray(o[c])&&r(o[c])}const s=t(e||{});return r(s),n}function ur(e,t){return({exclude:n,format:r})=>({exclude:n,format:(s,o)=>{const i=t(s,o);if(n)for(const c of n)delete i[c];return{...i,...r(s,o)}},type:e})}const J0={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function At(e,t){const n={};return typeof e.authorizationList<"u"&&(n.authorizationList=X0(e.authorizationList)),typeof e.accessList<"u"&&(n.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(n.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?n.blobs=e.blobs.map(r=>D(r)):n.blobs=e.blobs),typeof e.data<"u"&&(n.data=e.data),e.account&&(n.from=e.account.address),typeof e.from<"u"&&(n.from=e.from),typeof e.gas<"u"&&(n.gas=T(e.gas)),typeof e.gasPrice<"u"&&(n.gasPrice=T(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(n.maxFeePerBlobGas=T(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(n.maxFeePerGas=T(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(n.maxPriorityFeePerGas=T(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(n.nonce=T(e.nonce)),typeof e.to<"u"&&(n.to=e.to),typeof e.type<"u"&&(n.type=J0[e.type]),typeof e.value<"u"&&(n.value=T(e.value)),n}function X0(e){return e.map(t=>({address:t.address,r:t.r?T(BigInt(t.r)):t.r,s:t.s?T(BigInt(t.s)):t.s,chainId:T(t.chainId),nonce:T(t.nonce),...typeof t.yParity<"u"?{yParity:T(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:T(t.v)}:{}}))}function ys(e){if(!(!e||e.length===0))return e.reduce((t,{slot:n,value:r})=>{if(n.length!==66)throw new Qr({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new Qr({size:r.length,targetSize:66,type:"hex"});return t[n]=r,t},{})}function Q0(e){const{balance:t,nonce:n,state:r,stateDiff:s,code:o}=e,i={};if(o!==void 0&&(i.code=o),t!==void 0&&(i.balance=T(t)),n!==void 0&&(i.nonce=T(n)),r!==void 0&&(i.state=ys(r)),s!==void 0){if(i.state)throw new C0;i.stateDiff=ys(s)}return i}function fr(e){if(!e)return;const t={};for(const{address:n,...r}of e){if(!se(n,{strict:!1}))throw new ce({address:n});if(t[n])throw new F0({address:n});t[n]=Q0(r)}return t}const Jt=2n**256n-1n;function it(e){const{account:t,maxFeePerGas:n,maxPriorityFeePerGas:r,to:s}=e,o=t?Q(t):void 0;if(o&&!se(o.address))throw new ce({address:o.address});if(s&&!se(s))throw new ce({address:s});if(n&&n>Jt)throw new nt({maxFeePerGas:n});if(r&&n&&r>n)throw new zt({maxFeePerGas:n,maxPriorityFeePerGas:r})}class No extends O{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class dr extends O{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class ec extends O{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${me(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class ko extends O{constructor({blockHash:t,blockNumber:n}){let r="Block";t&&(r=`Block at hash "${t}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const Fo={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Xt(e,t){const n={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?re(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?re(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?Fo[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(n.authorizationList=tc(e.authorizationList)),n.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof n.v=="bigint"){if(n.v===0n||n.v===27n)return 0;if(n.v===1n||n.v===28n)return 1;if(n.v>=35n)return n.v%2n===0n?1:0}})(),n.type==="legacy"&&(delete n.accessList,delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.yParity),n.type==="eip2930"&&(delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas),n.type==="eip1559"&&delete n.maxFeePerBlobGas,n}const gl=ur("transaction",Xt);function tc(e){return e.map(t=>({address:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function lr(e,t){const n=(e.transactions??[]).map(r=>typeof r=="string"?r:Xt(r));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:n,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}const wl=ur("block",lr);async function ie(e,{blockHash:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",includeTransactions:s}={}){const o=s??!1,i=n!==void 0?T(n):void 0;let c=null;if(t?c=await e.request({method:"eth_getBlockByHash",params:[t,o]},{dedupe:!0}):c=await e.request({method:"eth_getBlockByNumber",params:[i||r,o]},{dedupe:!!i}),!c)throw new ko({blockHash:t,blockNumber:n});return(e.chain?.formatters?.block?.format||lr)(c,"getBlock")}async function br(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function nc(e,t){return Co(e,t)}async function Co(e,t){const{block:n,chain:r=e.chain,request:s}=t||{};try{const o=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if(typeof o=="function"){const c=n||await _(e,ie,"getBlock")({}),a=await o({block:c,client:e,request:s});if(a===null)throw new Error;return a}if(typeof o<"u")return o;const i=await e.request({method:"eth_maxPriorityFeePerGas"});return ae(i)}catch{const[o,i]=await Promise.all([n?Promise.resolve(n):_(e,ie,"getBlock")({}),_(e,br,"getGasPrice")({})]);if(typeof o.baseFeePerGas!="bigint")throw new dr;const c=i-o.baseFeePerGas;return c<0n?0n:c}}async function rc(e,t){return Hn(e,t)}async function Hn(e,t){const{block:n,chain:r=e.chain,request:s,type:o="eip1559"}=t||{},i=await(async()=>typeof r?.fees?.baseFeeMultiplier=="function"?r.fees.baseFeeMultiplier({block:n,client:e,request:s}):r?.fees?.baseFeeMultiplier??1.2)();if(i<1)throw new No;const a=10**(i.toString().split(".")[1]?.length??0),u=l=>l*BigInt(Math.ceil(i*a))/BigInt(a),f=n||await _(e,ie,"getBlock")({});if(typeof r?.fees?.estimateFeesPerGas=="function"){const l=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:u,request:s,type:o});if(l!==null)return l}if(o==="eip1559"){if(typeof f.baseFeePerGas!="bigint")throw new dr;const l=typeof s?.maxPriorityFeePerGas=="bigint"?s.maxPriorityFeePerGas:await Co(e,{block:f,chain:r,request:s}),b=u(f.baseFeePerGas);return{maxFeePerGas:s?.maxFeePerGas??b+l,maxPriorityFeePerGas:l}}return{gasPrice:s?.gasPrice??u(await _(e,br,"getGasPrice")({}))}}async function Ro(e,{address:t,blockTag:n="latest",blockNumber:r}){const s=await e.request({method:"eth_getTransactionCount",params:[t,typeof r=="bigint"?T(r):n]},{dedupe:!!r});return re(s)}function hr(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(o=>Ae(o)):e.blobs,s=[];for(const o of r)s.push(Uint8Array.from(t.blobToKzgCommitment(o)));return n==="bytes"?s:s.map(o=>D(o))}function pr(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(i=>Ae(i)):e.blobs,s=typeof e.commitments[0]=="string"?e.commitments.map(i=>Ae(i)):e.commitments,o=[];for(let i=0;i<r.length;i++){const c=r[i],a=s[i];o.push(Uint8Array.from(t.computeBlobKzgProof(c,a)))}return n==="bytes"?o:o.map(i=>D(i))}function sc(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(n>>s&o),c=Number(n&o),a=r?4:0,u=r?0:4;e.setUint32(t+a,i,r),e.setUint32(t+u,c,r)}function oc(e,t,n){return e&t^~e&n}function ic(e,t,n){return e&t^e&n^t&n}class ac extends eo{constructor(t,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=mn(this.buffer)}update(t){Ot(this),t=to(t),no(t);const{view:n,buffer:r,blockLen:s}=this,o=t.length;for(let i=0;i<o;){const c=Math.min(s-this.pos,o-i);if(c===s){const a=mn(t);for(;s<=o-i;i+=s)this.process(a,i);continue}r.set(t.subarray(i,i+c),this.pos),this.pos+=c,i+=c,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ot(this),ua(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:i}=this;n[i++]=128,Lt(this.buffer.subarray(i)),this.padOffset>s-i&&(this.process(r,0),i=0);for(let d=i;d<s;d++)n[d]=0;sc(r,s-8,BigInt(this.length*8),o),this.process(r,0);const c=mn(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)c.setUint32(4*d,f[d],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:i,pos:c}=this;return t.destroyed=i,t.finished=o,t.length=s,t.pos=c,s%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const ke=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),cc=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fe=new Uint32Array(64);class uc extends ac{constructor(t=32){super(64,t,8,!1),this.A=ke[0]|0,this.B=ke[1]|0,this.C=ke[2]|0,this.D=ke[3]|0,this.E=ke[4]|0,this.F=ke[5]|0,this.G=ke[6]|0,this.H=ke[7]|0}get(){const{A:t,B:n,C:r,D:s,E:o,F:i,G:c,H:a}=this;return[t,n,r,s,o,i,c,a]}set(t,n,r,s,o,i,c,a){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=c|0,this.H=a|0}process(t,n){for(let d=0;d<16;d++,n+=4)Fe[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const l=Fe[d-15],b=Fe[d-2],m=he(l,7)^he(l,18)^l>>>3,p=he(b,17)^he(b,19)^b>>>10;Fe[d]=p+Fe[d-7]+m+Fe[d-16]|0}let{A:r,B:s,C:o,D:i,E:c,F:a,G:u,H:f}=this;for(let d=0;d<64;d++){const l=he(c,6)^he(c,11)^he(c,25),b=f+l+oc(c,a,u)+cc[d]+Fe[d]|0,p=(he(r,2)^he(r,13)^he(r,22))+ic(r,s,o)|0;f=u,u=a,a=c,c=i+b|0,i=o,o=s,s=r,r=b+p|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,c=c+this.E|0,a=a+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(r,s,o,i,c,a,u,f)}roundClean(){Lt(Fe)}destroy(){this.set(0,0,0,0,0,0,0,0),Lt(this.buffer)}}const zo=fa(()=>new uc),fc=zo;function dc(e,t){return fc(bt(e,{strict:!1})?jt(e):e)}function lc(e){const{commitment:t,version:n=1}=e,r=e.to??(typeof t=="string"?"hex":"bytes"),s=dc(t);return s.set([n],0),r==="bytes"?s:D(s)}function _o(e){const{commitments:t,version:n}=e,r=e.to??(typeof t[0]=="string"?"hex":"bytes"),s=[];for(const o of t)s.push(lc({commitment:o,to:r,version:n}));return s}const gs=6,Oo=32,mr=4096,Lo=Oo*mr,ws=Lo*gs-1-1*mr*gs,Uo=1;class bc extends O{constructor({maxSize:t,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class Mo extends O{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class hc extends O{constructor({hash:t,size:n}){super(`Versioned hash "${t}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}}class pc extends O{constructor({hash:t,version:n}){super(`Versioned hash "${t}" version is invalid.`,{metaMessages:[`Expected: ${Uo}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}function mc(e){const t=e.to??(typeof e.data=="string"?"hex":"bytes"),n=typeof e.data=="string"?Ae(e.data):e.data,r=Ce(n);if(!r)throw new Mo;if(r>ws)throw new bc({maxSize:ws,size:r});const s=[];let o=!0,i=0;for(;o;){const c=ar(new Uint8Array(Lo));let a=0;for(;a<mr;){const u=n.slice(i,i+(Oo-1));if(c.pushByte(0),c.pushBytes(u),u.length<31){c.pushByte(128),o=!1;break}a++,i+=31}s.push(c)}return t==="bytes"?s.map(c=>c.bytes):s.map(c=>D(c.bytes))}function Go(e){const{data:t,kzg:n,to:r}=e,s=e.blobs??mc({data:t,to:r}),o=e.commitments??hr({blobs:s,kzg:n,to:r}),i=e.proofs??pr({blobs:s,commitments:o,kzg:n,to:r}),c=[];for(let a=0;a<s.length;a++)c.push({blob:s[a],commitment:o[a],proof:i[a]});return c}function Ho(e){if(e.type)return e.type;if(typeof e.authorizationList<"u")return"eip7702";if(typeof e.blobs<"u"||typeof e.blobVersionedHashes<"u"||typeof e.maxFeePerBlobGas<"u"||typeof e.sidecars<"u")return"eip4844";if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new _0({transaction:e})}function yc(e,{docsPath:t,...n}){const r=(()=>{const s=Kt(e,n);return s instanceof xt?e:s})();return new L0(r,{docsPath:t,...n})}async function yr(e){const t=await e.request({method:"eth_chainId"},{dedupe:!0});return re(t)}async function jo(e,t){const{account:n=e.account,accessList:r,authorizationList:s,chain:o=e.chain,blobVersionedHashes:i,blobs:c,data:a,gas:u,gasPrice:f,maxFeePerBlobGas:d,maxFeePerGas:l,maxPriorityFeePerGas:b,nonce:m,nonceManager:p,to:g,type:P,value:B,...w}=t,h=await(async()=>{if(!n||!p||typeof m<"u")return m;const $=Q(n),k=o?o.id:await _(e,yr,"getChainId")({});return await p.consume({address:$.address,chainId:k,client:e})})();it(t);const y=o?.formatters?.transactionRequest?.format,v=(y||At)({...Yt(w,{format:y}),account:n?Q(n):void 0,accessList:r,authorizationList:s,blobs:c,blobVersionedHashes:i,data:a,gas:u,gasPrice:f,maxFeePerBlobGas:d,maxFeePerGas:l,maxPriorityFeePerGas:b,nonce:h,to:g,type:P,value:B},"fillTransaction");try{const $=await e.request({method:"eth_fillTransaction",params:[v]}),E=(o?.formatters?.transaction?.format||Xt)($.tx);delete E.blockHash,delete E.blockNumber,delete E.r,delete E.s,delete E.transactionIndex,delete E.v,delete E.yParity,E.data=E.input,E.gas&&(E.gas=t.gas??E.gas),E.gasPrice&&(E.gasPrice=t.gasPrice??E.gasPrice),E.maxFeePerBlobGas&&(E.maxFeePerBlobGas=t.maxFeePerBlobGas??E.maxFeePerBlobGas),E.maxFeePerGas&&(E.maxFeePerGas=t.maxFeePerGas??E.maxFeePerGas),E.maxPriorityFeePerGas&&(E.maxPriorityFeePerGas=t.maxPriorityFeePerGas??E.maxPriorityFeePerGas),E.nonce&&(E.nonce=t.nonce??E.nonce);const N=await(async()=>{if(typeof o?.fees?.baseFeeMultiplier=="function"){const A=await _(e,ie,"getBlock")({});return o.fees.baseFeeMultiplier({block:A,client:e,request:t})}return o?.fees?.baseFeeMultiplier??1.2})();if(N<1)throw new No;const F=10**(N.toString().split(".")[1]?.length??0),U=A=>A*BigInt(Math.ceil(N*F))/BigInt(F);return E.maxFeePerGas&&!t.maxFeePerGas&&(E.maxFeePerGas=U(E.maxFeePerGas)),E.gasPrice&&!t.gasPrice&&(E.gasPrice=U(E.gasPrice)),{raw:$.raw,transaction:{from:v.from,...E}}}catch($){throw yc($,{...t,chain:e.chain})}}const gc=["blobVersionedHashes","chainId","fees","gas","nonce","type"],xs=new Map,gn=new js(128);async function Do(e,t){let n=t;const{account:r=e.account,chain:s=e.chain,nonceManager:o,parameters:i=gc}=n,c=(()=>{if(typeof s?.prepareTransactionRequest=="function")return{fn:s.prepareTransactionRequest,runAt:["beforeFillTransaction"]};if(Array.isArray(s?.prepareTransactionRequest))return{fn:s.prepareTransactionRequest[0],runAt:s.prepareTransactionRequest[1].runAt}})();let a;async function u(){return a||(typeof n.chainId<"u"?n.chainId:s?s.id:(a=await _(e,yr,"getChainId")({}),a))}const f=r&&Q(r);let d=n.nonce;if(i.includes("nonce")&&typeof d>"u"&&f&&o){const h=await u();d=await o.consume({address:f.address,chainId:h,client:e})}c?.fn&&c.runAt?.includes("beforeFillTransaction")&&(n=await c.fn(n,{phase:"beforeFillTransaction"}),d??=n.nonce);const b=((i.includes("blobVersionedHashes")||i.includes("sidecars"))&&n.kzg&&n.blobs||gn.get(e.uid)===!1||!["fees","gas"].some(y=>i.includes(y))?!1:!!(i.includes("chainId")&&typeof n.chainId!="number"||i.includes("nonce")&&typeof d!="number"||i.includes("fees")&&typeof n.gasPrice!="bigint"&&(typeof n.maxFeePerGas!="bigint"||typeof n.maxPriorityFeePerGas!="bigint")||i.includes("gas")&&typeof n.gas!="bigint"))?await _(e,jo,"fillTransaction")({...n,nonce:d}).then(h=>{const{chainId:y,from:x,gas:v,gasPrice:$,nonce:k,maxFeePerBlobGas:E,maxFeePerGas:N,maxPriorityFeePerGas:R,type:F,...U}=h.transaction;return gn.set(e.uid,!0),{...n,...x?{from:x}:{},...F?{type:F}:{},...typeof y<"u"?{chainId:y}:{},...typeof v<"u"?{gas:v}:{},...typeof $<"u"?{gasPrice:$}:{},...typeof k<"u"?{nonce:k}:{},...typeof E<"u"?{maxFeePerBlobGas:E}:{},...typeof N<"u"?{maxFeePerGas:N}:{},...typeof R<"u"?{maxPriorityFeePerGas:R}:{},..."nonceKey"in U&&typeof U.nonceKey<"u"?{nonceKey:U.nonceKey}:{}}}).catch(h=>(h.walk?.(v=>{const $=v;return $.name==="MethodNotFoundRpcError"||$.name==="MethodNotSupportedRpcError"})&&gn.set(e.uid,!1),n)):n;d??=b.nonce,n={...b,...f?{from:f?.address}:{},...d?{nonce:d}:{}};const{blobs:m,gas:p,kzg:g,type:P}=n;c?.fn&&c.runAt?.includes("beforeFillParameters")&&(n=await c.fn(n,{phase:"beforeFillParameters"}));let B;async function w(){return B||(B=await _(e,ie,"getBlock")({blockTag:"latest"}),B)}if(i.includes("nonce")&&typeof d>"u"&&f&&!o&&(n.nonce=await _(e,Ro,"getTransactionCount")({address:f.address,blockTag:"pending"})),(i.includes("blobVersionedHashes")||i.includes("sidecars"))&&m&&g){const h=hr({blobs:m,kzg:g});if(i.includes("blobVersionedHashes")){const y=_o({commitments:h,to:"hex"});n.blobVersionedHashes=y}if(i.includes("sidecars")){const y=pr({blobs:m,commitments:h,kzg:g}),x=Go({blobs:m,commitments:h,proofs:y,to:"hex"});n.sidecars=x}}if(i.includes("chainId")&&(n.chainId=await u()),(i.includes("fees")||i.includes("type"))&&typeof P>"u")try{n.type=Ho(n)}catch{let h=xs.get(e.uid);typeof h>"u"&&(h=typeof(await w())?.baseFeePerGas=="bigint",xs.set(e.uid,h)),n.type=h?"eip1559":"legacy"}if(i.includes("fees"))if(n.type!=="legacy"&&n.type!=="eip2930"){if(typeof n.maxFeePerGas>"u"||typeof n.maxPriorityFeePerGas>"u"){const h=await w(),{maxFeePerGas:y,maxPriorityFeePerGas:x}=await Hn(e,{block:h,chain:s,request:n});if(typeof n.maxPriorityFeePerGas>"u"&&n.maxFeePerGas&&n.maxFeePerGas<x)throw new ec({maxPriorityFeePerGas:x});n.maxPriorityFeePerGas=x,n.maxFeePerGas=y}}else{if(typeof n.maxFeePerGas<"u"||typeof n.maxPriorityFeePerGas<"u")throw new dr;if(typeof n.gasPrice>"u"){const h=await w(),{gasPrice:y}=await Hn(e,{block:h,chain:s,request:n,type:"legacy"});n.gasPrice=y}}return i.includes("gas")&&typeof p>"u"&&(n.gas=await _(e,gr,"estimateGas")({...n,account:f,prepare:f?.type==="local"?[]:["blobVersionedHashes"]})),c?.fn&&c.runAt?.includes("afterFillParameters")&&(n=await c.fn(n,{phase:"afterFillParameters"})),it(n),delete n.parameters,n}async function gr(e,t){const{account:n=e.account,prepare:r=!0}=t,s=n?Q(n):void 0,o=(()=>{if(Array.isArray(r))return r;if(s?.type!=="local")return["blobVersionedHashes"]})();try{const i=await(async()=>{if(t.to)return t.to;if(t.authorizationList&&t.authorizationList.length>0)return await To({authorization:t.authorizationList[0]}).catch(()=>{throw new O("`to` is required. Could not infer from `authorizationList`")})})(),{accessList:c,authorizationList:a,blobs:u,blobVersionedHashes:f,blockNumber:d,blockTag:l,data:b,gas:m,gasPrice:p,maxFeePerBlobGas:g,maxFeePerGas:P,maxPriorityFeePerGas:B,nonce:w,value:h,stateOverride:y,...x}=r?await Do(e,{...t,parameters:o,to:i}):t;if(m&&t.gas!==m)return m;const $=(typeof d=="bigint"?T(d):void 0)||l,k=fr(y);it(t);const E=e.chain?.formatters?.transactionRequest?.format,R=(E||At)({...Yt(x,{format:E}),account:s,accessList:c,authorizationList:a,blobs:u,blobVersionedHashes:f,data:b,gasPrice:p,maxFeePerBlobGas:g,maxFeePerGas:P,maxPriorityFeePerGas:B,nonce:w,to:i,value:h},"estimateGas");return BigInt(await e.request({method:"eth_estimateGas",params:k?[R,$??e.experimental_blockTag??"latest",k]:$?[R,$]:[R]}))}catch(i){throw Y0(i,{...t,account:s,chain:e.chain})}}async function wc(e,t){const{abi:n,address:r,args:s,functionName:o,dataSuffix:i,...c}=t,a=be({abi:n,args:s,functionName:o});try{return await _(e,gr,"estimateGas")({data:`${a}${i?i.replace("0x",""):""}`,to:r,...c})}catch(u){const f=c.account?Q(c.account):void 0;throw rt(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:o,sender:f?.address})}}function Qt(e,t){if(!se(e,{strict:!1}))throw new ce({address:e});if(!se(t,{strict:!1}))throw new ce({address:t});return e.toLowerCase()===t.toLowerCase()}const vs="/docs/contract/decodeEventLog";function wr(e){const{abi:t,data:n,strict:r,topics:s}=e,o=r??!0,[i,...c]=s;if(!i)throw new da({docsPath:vs});const a=t.find(p=>p.type==="event"&&i===sr(Ve(p)));if(!(a&&"name"in a)||a.type!=="event")throw new ro(i,{docsPath:vs});const{name:u,inputs:f}=a,d=f?.some(p=>!("name"in p&&p.name)),l=d?[]:{},b=f.map((p,g)=>[p,g]).filter(([p])=>"indexed"in p&&p.indexed);for(let p=0;p<b.length;p++){const[g,P]=b[p],B=c[p];if(!B)throw new Vt({abiItem:a,param:g});l[d?P:g.name||P]=xc({param:g,value:B})}const m=f.filter(p=>!("indexed"in p&&p.indexed));if(m.length>0){if(n&&n!=="0x")try{const p=Bt(m,n);if(p)if(d)for(let g=0;g<f.length;g++)l[g]=l[g]??p.shift();else for(let g=0;g<m.length;g++)l[m[g].name]=p[g]}catch(p){if(o)throw p instanceof Ys||p instanceof xo?new pt({abiItem:a,data:n,params:m,size:Ce(n)}):p}else if(o)throw new pt({abiItem:a,data:"0x",params:m,size:0})}return{eventName:u,args:Object.values(l).length>0?l:void 0}}function xc({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(Bt([e],t)||[])[0]}function xr(e){const{abi:t,args:n,logs:r,strict:s=!0}=e,o=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(i=>{try{const c=t.find(u=>u.type==="event"&&i.topics[0]===sr(u));if(!c)return null;const a=wr({...i,abi:[c],strict:s});return o&&!o.includes(a.eventName)||!vc({args:a.args,inputs:c.inputs,matchArgs:n})?null:{...a,...i}}catch(c){let a,u;if(c instanceof ro)return null;if(c instanceof pt||c instanceof Vt){if(s)return null;a=c.abiItem.name,u=c.abiItem.inputs?.some(f=>!("name"in f&&f.name))}return{...i,args:u?[]:{},eventName:a}}}).filter(Boolean)}function vc(e){const{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function s(o,i,c){try{return o.type==="address"?Qt(i,c):o.type==="string"||o.type==="bytes"?Me(jt(i))===c:i===c}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((o,i)=>{if(o==null)return!0;const c=n[i];return c?(Array.isArray(o)?o:[o]).some(u=>s(c,u,t[i])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([o,i])=>{if(i==null)return!0;const c=n.find(u=>u.name===o);return c?(Array.isArray(i)?i:[i]).some(u=>s(c,u,t[o])):!1}):!1}function Se(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function vr(e,{address:t,blockHash:n,fromBlock:r,toBlock:s,event:o,events:i,args:c,strict:a}={}){const u=a??!1,f=i??(o?[o]:void 0);let d=[];f&&(d=[f.flatMap(p=>Et({abi:[p],eventName:p.name,args:i?void 0:c}))],o&&(d=d[0]));let l;n?l=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:n}]}):l=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:typeof r=="bigint"?T(r):r,toBlock:typeof s=="bigint"?T(s):s}]});const b=l.map(m=>Se(m));return f?xr({abi:f,args:c,logs:b,strict:u}):b}async function Vo(e,t){const{abi:n,address:r,args:s,blockHash:o,eventName:i,fromBlock:c,toBlock:a,strict:u}=t,f=i?st({abi:n,name:i}):void 0,d=f?void 0:n.filter(l=>l.type==="event");return _(e,vr,"getLogs")({address:r,args:s,blockHash:o,event:f,events:d,fromBlock:c,toBlock:a,strict:u})}const wn="/docs/contract/decodeFunctionResult";function qe(e){const{abi:t,args:n,functionName:r,data:s}=e;let o=t[0];if(r){const c=st({abi:t,args:n,name:r});if(!c)throw new Ut(r,{docsPath:wn});o=c}if(o.type!=="function")throw new Ut(void 0,{docsPath:wn});if(!o.outputs)throw new so(o.name,{docsPath:wn});const i=Bt(o.outputs,s);if(i&&i.length>1)return i;if(i&&i.length===1)return i[0]}const Pr=BigInt(0),jn=BigInt(1);function $t(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Er(e){if(!$t(e))throw new Error("Uint8Array expected")}function yt(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function Ct(e){const t=e.toString(16);return t.length&1?"0"+t:t}function qo(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Pr:BigInt("0x"+e)}const Zo=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Pc=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function gt(e){if(Er(e),Zo)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=Pc[e[n]];return t}const we={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ps(e){if(e>=we._0&&e<=we._9)return e-we._0;if(e>=we.A&&e<=we.F)return e-(we.A-10);if(e>=we.a&&e<=we.f)return e-(we.a-10)}function Mt(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Zo)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const i=Ps(e.charCodeAt(o)),c=Ps(e.charCodeAt(o+1));if(i===void 0||c===void 0){const a=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+o)}r[s]=i*16+c}return r}function Le(e){return qo(gt(e))}function Wo(e){return Er(e),qo(gt(Uint8Array.from(e).reverse()))}function St(e,t){return Mt(e.toString(16).padStart(t*2,"0"))}function Ko(e,t){return St(e,t).reverse()}function ne(e,t,n){let r;if(typeof t=="string")try{r=Mt(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if($t(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}function Gt(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];Er(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const o=e[r];n.set(o,s),s+=o.length}return n}const xn=e=>typeof e=="bigint"&&Pr<=e;function Br(e,t,n){return xn(e)&&xn(t)&&xn(n)&&t<=e&&e<n}function et(e,t,n,r){if(!Br(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Ec(e){let t;for(t=0;e>Pr;e>>=jn,t+=1);return t}const en=e=>(jn<<BigInt(e))-jn,vn=e=>new Uint8Array(e),Es=e=>Uint8Array.from(e);function Bc(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=vn(e),s=vn(e),o=0;const i=()=>{r.fill(1),s.fill(0),o=0},c=(...d)=>n(s,r,...d),a=(d=vn(0))=>{s=c(Es([0]),d),r=c(),d.length!==0&&(s=c(Es([1]),d),r=c())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const l=[];for(;d<t;){r=c();const b=r.slice();l.push(b),d+=r.length}return Gt(...l)};return(d,l)=>{i(),a(d);let b;for(;!(b=l(u()));)a();return i(),b}}const Ic={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||$t(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function tn(e,t,n={}){const r=(s,o,i)=>{const c=Ic[o];if(typeof c!="function")throw new Error("invalid validator function");const a=e[s];if(!(i&&a===void 0)&&!c(a,e))throw new Error("param "+String(s)+" is invalid. Expected "+o+", got "+a)};for(const[s,o]of Object.entries(t))r(s,o,!1);for(const[s,o]of Object.entries(n))r(s,o,!0);return e}function Bs(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const o=e(n,...r);return t.set(n,o),o}}const Ac="0.1.1";function $c(){return Ac}class M extends Error{constructor(t,n={}){const r=(()=>{if(n.cause instanceof M){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),s=n.cause instanceof M&&n.cause.docsPath||n.docsPath,i=`https://oxlib.sh${s??""}`,c=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${i}`:void 0]:[]].filter(a=>typeof a=="string").join(`
`);super(c,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${$c()}`}),this.cause=n.cause,this.details=r,this.docs=i,this.docsPath=s,this.shortMessage=t}walk(t){return Yo(this,t)}}function Yo(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?Yo(e.cause,t):t?null:e}function Tt(e,t){if(Je(e)>t)throw new Dc({givenSize:Je(e),maxSize:t})}const xe={zero:48,nine:57,A:65,F:70,a:97,f:102};function Is(e){if(e>=xe.zero&&e<=xe.nine)return e-xe.zero;if(e>=xe.A&&e<=xe.F)return e-(xe.A-10);if(e>=xe.a&&e<=xe.f)return e-(xe.a-10)}function Sc(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new Vc({size:e.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let o=0;o<r;o++){const i=n==="right";s[i?o:r-o-1]=e[i?o:e.length-o-1]}return s}function Jo(e,t={}){const{dir:n="left"}=t;let r=e,s=0;for(let o=0;o<r.length-1&&r[n==="left"?o:r.length-o-1].toString()==="0";o++)s++;return r=n==="left"?r.slice(s):r.slice(0,r.length-s),r}function nn(e,t){if(ee(e)>t)throw new Jc({givenSize:ee(e),maxSize:t})}function Tc(e,t){if(typeof t=="number"&&t>0&&t>ee(e)-1)throw new ii({offset:t,position:"start",size:ee(e)})}function Nc(e,t,n){if(typeof t=="number"&&typeof n=="number"&&ee(e)!==n-t)throw new ii({offset:n,position:"end",size:ee(e)})}function Xo(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const s=e.replace("0x","");if(s.length>r*2)throw new Xc({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const kc="#__bigint";function Qo(e,t,n){return JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString()+kc:s,n)}const Fc=new TextDecoder,Cc=new TextEncoder;function Rc(e){return e instanceof Uint8Array?e:typeof e=="string"?ei(e):zc(e)}function zc(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function ei(e,t={}){const{size:n}=t;let r=e;n&&(nn(e,n),r=je(e,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const o=s.length/2,i=new Uint8Array(o);for(let c=0,a=0;c<o;c++){const u=Is(s.charCodeAt(a++)),f=Is(s.charCodeAt(a++));if(u===void 0||f===void 0)throw new M(`Invalid byte sequence ("${s[a-2]}${s[a-1]}" in "${s}").`);i[c]=u*16+f}return i}function _c(e,t={}){const{size:n}=t,r=Cc.encode(e);return typeof n=="number"?(Tt(r,n),Oc(r,n)):r}function Oc(e,t){return Sc(e,{dir:"right",size:t})}function Je(e){return e.length}function Lc(e,t,n,r={}){const{strict:s}=r;return e.slice(t,n)}function Uc(e,t={}){const{size:n}=t;typeof n<"u"&&Tt(e,n);const r=fe(e,t);return ri(r,t)}function Mc(e,t={}){const{size:n}=t;let r=e;if(typeof n<"u"&&(Tt(r,n),r=ti(r)),r.length>1||r[0]>1)throw new jc(r);return!!r[0]}function Be(e,t={}){const{size:n}=t;typeof n<"u"&&Tt(e,n);const r=fe(e,t);return si(r,t)}function Gc(e,t={}){const{size:n}=t;let r=e;return typeof n<"u"&&(Tt(r,n),r=Hc(r)),Fc.decode(r)}function ti(e){return Jo(e,{dir:"left"})}function Hc(e){return Jo(e,{dir:"right"})}class jc extends M{constructor(t){super(`Bytes value \`${t}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}let Dc=class extends M{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},Vc=class extends M{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const qc=new TextEncoder,Zc=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Wc(e,t={}){const{strict:n=!1}=t;if(!e)throw new As(e);if(typeof e!="string")throw new As(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new $s(e);if(!e.startsWith("0x"))throw new $s(e)}function ue(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function Kc(e){return e instanceof Uint8Array?fe(e):Array.isArray(e)?fe(new Uint8Array(e)):e}function ni(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(nn(n,t.size),He(n,t.size)):n}function fe(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=Zc[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(nn(r,t.size),je(r,t.size)):r}function q(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const i=typeof o=="bigint"&&n?-o-1n:0;if(o&&s>o||s<i){const u=typeof e=="bigint"?"n":"";throw new oi({max:o?`${o}${u}`:void 0,min:`${i}${u}`,signed:n,size:r,value:`${e}${u}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?He(a,r):a}function Ir(e,t={}){return fe(qc.encode(e),t)}function He(e,t){return Xo(e,{dir:"left",size:t})}function je(e,t){return Xo(e,{dir:"right",size:t})}function ye(e,t,n,r={}){const{strict:s}=r;Tc(e,t);const o=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return s&&Nc(o,t,n),o}function ee(e){return Math.ceil((e.length-2)/2)}function ri(e,t={}){const{signed:n}=t;t.size&&nn(e,t.size);const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,o=(1n<<BigInt(s)*8n)-1n,i=o>>1n;return r<=i?r:r-o-1n}function si(e,t={}){const{signed:n,size:r}=t;return Number(!n&&!r?e:ri(e,t))}function Yc(e,t={}){const{strict:n=!1}=t;try{return Wc(e,{strict:n}),!0}catch{return!1}}class oi extends M{constructor({max:t,min:n,signed:r,size:s,value:o}){super(`Number \`${o}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class As extends M{constructor(t){super(`Value \`${typeof t=="object"?Qo(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class $s extends M{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class Jc extends M{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class ii extends M{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class Xc extends M{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function Qc(e){return{address:e.address,amount:q(e.amount),index:q(e.index),validatorIndex:q(e.validatorIndex)}}function ai(e){return{...typeof e.baseFeePerGas=="bigint"&&{baseFeePerGas:q(e.baseFeePerGas)},...typeof e.blobBaseFee=="bigint"&&{blobBaseFee:q(e.blobBaseFee)},...typeof e.feeRecipient=="string"&&{feeRecipient:e.feeRecipient},...typeof e.gasLimit=="bigint"&&{gasLimit:q(e.gasLimit)},...typeof e.number=="bigint"&&{number:q(e.number)},...typeof e.prevRandao=="bigint"&&{prevRandao:q(e.prevRandao)},...typeof e.time=="bigint"&&{time:q(e.time)},...e.withdrawals&&{withdrawals:e.withdrawals.map(Qc)}}}const eu="0x82ad56cb",ci="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",tu="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",nu="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",Ar="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033";class Dn extends O{constructor({blockNumber:t,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...t&&r.blockCreated&&r.blockCreated>t?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class ui extends O{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class rn extends O{constructor({chainId:t}){super(typeof t=="number"?`Chain ID "${t}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}const Pn="/docs/contract/encodeDeployData";function $r(e){const{abi:t,args:n,bytecode:r}=e;if(!n||n.length===0)return r;const s=t.find(i=>"type"in i&&i.type==="constructor");if(!s)throw new la({docsPath:Pn});if(!("inputs"in s))throw new os({docsPath:Pn});if(!s.inputs||s.inputs.length===0)throw new os({docsPath:Pn});const o=vt(s.inputs,n);return le([r,o])}function at({blockNumber:e,chain:t,contract:n}){const r=t?.contracts?.[n];if(!r)throw new Dn({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new Dn({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function fi(e,{docsPath:t,...n}){const r=(()=>{const s=Kt(e,n);return s instanceof xt?e:s})();return new Bo(r,{docsPath:t,...n})}async function sn(e,t){const{account:n=e.account,authorizationList:r,batch:s=!!e.batch?.multicall,blockNumber:o,blockTag:i=e.experimental_blockTag??"latest",accessList:c,blobs:a,blockOverrides:u,code:f,data:d,factory:l,factoryData:b,gas:m,gasPrice:p,maxFeePerBlobGas:g,maxFeePerGas:P,maxPriorityFeePerGas:B,nonce:w,to:h,value:y,stateOverride:x,...v}=t,$=n?Q(n):void 0;if(f&&(l||b))throw new O("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(f&&h)throw new O("Cannot provide both `code` & `to` as parameters.");const k=f&&d,E=l&&b&&h&&d,N=k||E,R=k?di({code:f,data:d}):E?ou({data:d,factory:l,factoryData:b,to:h}):d;try{it(t);const U=(typeof o=="bigint"?T(o):void 0)||i,A=u?ai(u):void 0,I=fr(x),z=e.chain?.formatters?.transactionRequest?.format,C=(z||At)({...Yt(v,{format:z}),accessList:c,account:$,authorizationList:r,blobs:a,data:R,gas:m,gasPrice:p,maxFeePerBlobGas:g,maxFeePerGas:P,maxPriorityFeePerGas:B,nonce:w,to:N?void 0:h,value:y},"call");if(s&&ru({request:C})&&!I&&!A)try{return await su(e,{...C,blockNumber:o,blockTag:i})}catch(H){if(!(H instanceof ui)&&!(H instanceof Dn))throw H}const L=(()=>{const H=[C,U];return I&&A?[...H,I,A]:I?[...H,I]:A?[...H,{},A]:H})(),G=await e.request({method:"eth_call",params:L});return G==="0x"?{data:void 0}:{data:G}}catch(F){const U=iu(F),{offchainLookup:A,offchainLookupSignature:I}=await Hs(async()=>{const{offchainLookup:z,offchainLookupSignature:S}=await import("./index-BiSao9nZ.js").then(C=>C.c);return{offchainLookup:z,offchainLookupSignature:S}},__vite__mapDeps([0,1,2,3]));if(e.ccipRead!==!1&&U?.slice(0,10)===I&&h)return{data:await A(e,{data:U,to:h})};throw N&&U?.slice(0,10)==="0x101bb98d"?new H0({factory:l}):fi(F,{...t,account:$,chain:e.chain})}}function ru({request:e}){const{data:t,to:n,...r}=e;return!(!t||t.startsWith(eu)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function su(e,t){const{batchSize:n=1024,deployless:r=!1,wait:s=0}=typeof e.batch?.multicall=="object"?e.batch.multicall:{},{blockNumber:o,blockTag:i=e.experimental_blockTag??"latest",data:c,to:a}=t,u=(()=>{if(r)return null;if(t.multicallAddress)return t.multicallAddress;if(e.chain)return at({blockNumber:o,chain:e.chain,contract:"multicall3"});throw new ui})(),d=(typeof o=="bigint"?T(o):void 0)||i,{schedule:l}=ta({id:`${e.uid}.${d}`,wait:s,shouldSplitBatch(p){return p.reduce((P,{data:B})=>P+(B.length-2),0)>n*2},fn:async p=>{const g=p.map(w=>({allowFailure:!0,callData:w.data,target:w.to})),P=be({abi:_t,args:[g],functionName:"aggregate3"}),B=await e.request({method:"eth_call",params:[{...u===null?{data:di({code:Ar,data:P})}:{to:u,data:P}},d]});return qe({abi:_t,args:[g],functionName:"aggregate3",data:B||"0x"})}}),[{returnData:b,success:m}]=await l({data:c,to:a});if(!m)throw new Wt({data:b});return b==="0x"?{data:void 0}:{data:b}}function di(e){const{code:t,data:n}=e;return $r({abi:yo(["constructor(bytes, bytes)"]),bytecode:ci,args:[t,n]})}function ou(e){const{data:t,factory:n,factoryData:r,to:s}=e;return $r({abi:yo(["constructor(address, bytes, address, bytes)"]),bytecode:tu,args:[s,t,n,r]})}function iu(e){if(!(e instanceof O))return;const t=e.walk();return typeof t?.data=="object"?t.data?.data:t.data}async function de(e,t){const{abi:n,address:r,args:s,functionName:o,...i}=t,c=be({abi:n,args:s,functionName:o});try{const{data:a}=await _(e,sn,"call")({...i,data:c,to:r});return qe({abi:n,args:s,functionName:o,data:a||"0x"})}catch(a){throw rt(a,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:o})}}async function au(e,t){const{abi:n,address:r,args:s,dataSuffix:o,functionName:i,...c}=t,a=c.account?Q(c.account):e.account,u=be({abi:n,args:s,functionName:i});try{const{data:f}=await _(e,sn,"call")({batch:!1,data:`${u}${o?o.replace("0x",""):""}`,to:r,...c,account:a}),d=qe({abi:n,args:s,functionName:i,data:f||"0x"}),l=n.filter(b=>"name"in b&&b.name===t.functionName);return{result:d,request:{abi:l,address:r,args:s,dataSuffix:o,functionName:i,...c,account:a}}}catch(f){throw rt(f,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:i,sender:a?.address})}}const En=new Map,Ss=new Map;let cu=0;function Te(e,t,n){const r=++cu,s=()=>En.get(e)||[],o=()=>{const f=s();En.set(e,f.filter(d=>d.id!==r))},i=()=>{const f=s();if(!f.some(l=>l.id===r))return;const d=Ss.get(e);if(f.length===1&&d){const l=d();l instanceof Promise&&l.catch(()=>{})}o()},c=s();if(En.set(e,[...c,{id:r,fns:t}]),c&&c.length>0)return i;const a={};for(const f in t)a[f]=((...d)=>{const l=s();if(l.length!==0)for(const b of l)b.fns[f]?.(...d)});const u=n(a);return typeof u=="function"&&Ss.set(e,u),i}function ct(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let s=!0;const o=()=>s=!1;return(async()=>{let c;t&&(c=await e({unpoll:o}));const a=await n?.(c)??r;await es(a);const u=async()=>{s&&(await e({unpoll:o}),await es(r),u())};u()})(),o}const uu=new Map,fu=new Map;function du(e){const t=(s,o)=>({clear:()=>o.delete(s),get:()=>o.get(s),set:i=>o.set(s,i)}),n=t(e,uu),r=t(e,fu);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function lu(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){const r=du(t),s=r.response.get();if(s&&n>0&&Date.now()-s.created.getTime()<n)return s.data;let o=r.promise.get();o||(o=e(),r.promise.set(o));try{const i=await o;return r.response.set({created:new Date,data:i}),i}finally{r.promise.clear()}}const bu=e=>`blockNumber.${e}`;async function Nt(e,{cacheTime:t=e.cacheTime}={}){const n=await lu(()=>e.request({method:"eth_blockNumber"}),{cacheKey:bu(e.uid),cacheTime:t});return BigInt(n)}async function on(e,{filter:t}){const n="strict"in t&&t.strict,r=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof r[0]=="string")return r;const s=r.map(o=>Se(o));return!("abi"in t)||!t.abi?s:xr({abi:t.abi,logs:s,strict:n})}async function an(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function hu(e,t){const{abi:n,address:r,args:s,batch:o=!0,eventName:i,fromBlock:c,onError:a,onLogs:u,poll:f,pollingInterval:d=e.pollingInterval,strict:l}=t;return(typeof f<"u"?f:typeof c=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")))?(()=>{const g=l??!1,P=ge(["watchContractEvent",r,s,o,e.uid,i,d,g,c]);return Te(P,{onLogs:u,onError:a},B=>{let w;c!==void 0&&(w=c-1n);let h,y=!1;const x=ct(async()=>{if(!y){try{h=await _(e,go,"createContractEventFilter")({abi:n,address:r,args:s,eventName:i,strict:g,fromBlock:c})}catch{}y=!0;return}try{let v;if(h)v=await _(e,on,"getFilterChanges")({filter:h});else{const $=await _(e,Nt,"getBlockNumber")({});w&&w<$?v=await _(e,Vo,"getContractEvents")({abi:n,address:r,args:s,eventName:i,fromBlock:w+1n,toBlock:$,strict:g}):v=[],w=$}if(v.length===0)return;if(o)B.onLogs(v);else for(const $ of v)B.onLogs([$])}catch(v){h&&v instanceof rr&&(y=!1),B.onError?.(v)}},{emitOnBegin:!0,interval:d});return async()=>{h&&await _(e,an,"uninstallFilter")({filter:h}),x()}})})():(()=>{const g=l??!1,P=ge(["watchContractEvent",r,s,o,e.uid,i,d,g]);let B=!0,w=()=>B=!1;return Te(P,{onLogs:u,onError:a},h=>((async()=>{try{const y=(()=>{if(e.transport.type==="fallback"){const $=e.transport.transports.find(k=>k.config.type==="webSocket"||k.config.type==="ipc");return $?$.value:e.transport}return e.transport})(),x=i?Et({abi:n,eventName:i,args:s}):[],{unsubscribe:v}=await y.subscribe({params:["logs",{address:r,topics:x}],onData($){if(!B)return;const k=$.result;try{const{eventName:E,args:N}=wr({abi:n,data:k.data,topics:k.topics,strict:l}),R=Se(k,{args:N,eventName:E});h.onLogs([R])}catch(E){let N,R;if(E instanceof pt||E instanceof Vt){if(l)return;N=E.abiItem.name,R=E.abiItem.inputs?.some(U=>!("name"in U&&U.name))}const F=Se(k,{args:R?[]:{},eventName:N});h.onLogs([F])}},onError($){h.onError?.($)}});w=v,B||w()}catch(y){a?.(y)}})(),()=>w()))})()}async function pu(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}class mu extends O{constructor(t){super(`Call bundle failed with status: ${t.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=t}}const li={"0x0":"reverted","0x1":"success"};function Sr(e,t){const n={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(r=>Se(r)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?re(e.transactionIndex):null,status:e.status?li[e.status]:null,type:e.type?Fo[e.type]||e.type:null};return e.blobGasPrice&&(n.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(n.blobGasUsed=BigInt(e.blobGasUsed)),n}const Pl=ur("transactionReceipt",Sr),yu="0x5792579257925792579257925792579257925792579257925792579257925792",gu=T(0,{size:32});async function wu(e,t){async function n(f){if(f.endsWith(yu.slice(2))){const l=Ie(is(f,-64,-32)),b=is(f,0,-64).slice(2).match(/.{1,64}/g),m=await Promise.all(b.map(g=>gu.slice(2)!==g?e.request({method:"eth_getTransactionReceipt",params:[`0x${g}`]},{dedupe:!0}):void 0)),p=m.some(g=>g===null)?100:m.every(g=>g?.status==="0x1")?200:m.every(g=>g?.status==="0x0")?500:600;return{atomic:!1,chainId:re(l),receipts:m.filter(Boolean),status:p,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[f]})}const{atomic:r=!1,chainId:s,receipts:o,version:i="2.0.0",...c}=await n(t.id),[a,u]=(()=>{const f=c.status;return f>=100&&f<200?["pending",f]:f>=200&&f<300?["success",f]:f>=300&&f<700?["failure",f]:f==="CONFIRMED"?["success",200]:f==="PENDING"?["pending",100]:[void 0,f]})();return{...c,atomic:r,chainId:s?re(s):void 0,receipts:o?.map(f=>({...f,blockNumber:ae(f.blockNumber),gasUsed:ae(f.gasUsed),status:li[f.status]}))??[],statusCode:u,status:a,version:i}}async function El(e,t){const{id:n,pollingInterval:r=e.pollingInterval,status:s=({statusCode:p})=>p===200||p>=300,retryCount:o=4,retryDelay:i=({count:p})=>~~(1<<p)*200,timeout:c=6e4,throwOnFailure:a=!1}=t,u=ge(["waitForCallsStatus",e.uid,n]),{promise:f,resolve:d,reject:l}=Ds();let b;const m=Te(u,{resolve:d,reject:l},p=>{const g=ct(async()=>{const P=B=>{clearTimeout(b),g(),B(),m()};try{const B=await Rn(async()=>{const w=await _(e,wu,"getCallsStatus")({id:n});if(a&&w.status==="failure")throw new mu(w);return w},{retryCount:o,delay:i});if(!s(B))return;P(()=>p.resolve(B))}catch(B){P(()=>p.reject(B))}},{interval:r,emitOnBegin:!0});return g});return b=c?setTimeout(()=>{m(),clearTimeout(b),l(new xu({id:n}))},c):void 0,await f}class xu extends O{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function vu(e){const{batch:t,chain:n,ccipRead:r,key:s="base",name:o="Base Client",type:i="base"}=e,c=e.experimental_blockTag??(typeof n?.experimental_preconfirmationTime=="number"?"pending":void 0),a=n?.blockTime??12e3,u=Math.min(Math.max(Math.floor(a/2),500),4e3),f=e.pollingInterval??u,d=e.cacheTime??f,l=e.account?Q(e.account):void 0,{config:b,request:m,value:p}=e.transport({account:l,chain:n,pollingInterval:f}),g={...b,...p},P={account:l,batch:t,cacheTime:d,ccipRead:r,chain:n,key:s,name:o,pollingInterval:f,request:m,transport:g,type:i,uid:na(),...c?{experimental_blockTag:c}:{}};function B(w){return h=>{const y=h(w);for(const v in P)delete y[v];const x={...w,...y};return Object.assign(x,{extend:B(x)})}}return Object.assign(P,{extend:B(P)})}function Tr(e){if(!(e instanceof O))return!1;const t=e.walk(n=>n instanceof Gn);return t instanceof Gn?t.data?.errorName==="HttpError"||t.data?.errorName==="ResolverError"||t.data?.errorName==="ResolverNotContract"||t.data?.errorName==="ResolverNotFound"||t.data?.errorName==="ReverseAddressMismatch"||t.data?.errorName==="UnsupportedResolverProfile":!1}function Pu(e){const{abi:t,data:n}=e,r=ht(n,0,4),s=t.find(o=>o.type==="function"&&r===or(Ve(o)));if(!s)throw new ba(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?Bt(s.inputs,ht(n,4)):void 0}}const Bn="/docs/contract/encodeErrorResult";function Ts(e){const{abi:t,errorName:n,args:r}=e;let s=t[0];if(n){const a=st({abi:t,args:r,name:n});if(!a)throw new as(n,{docsPath:Bn});s=a}if(s.type!=="error")throw new as(void 0,{docsPath:Bn});const o=Ve(s),i=or(o);let c="0x";if(r&&r.length>0){if(!s.inputs)throw new ha(s.name,{docsPath:Bn});c=vt(s.inputs,r)}return le([i,c])}const In="/docs/contract/encodeFunctionResult";function Eu(e){const{abi:t,functionName:n,result:r}=e;let s=t[0];if(n){const i=st({abi:t,name:n});if(!i)throw new Ut(n,{docsPath:In});s=i}if(s.type!=="function")throw new Ut(void 0,{docsPath:In});if(!s.outputs)throw new so(s.name,{docsPath:In});const o=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new pa(r)})();return vt(s.outputs,o)}const cn="x-batch-gateway:true";async function Bu(e){const{data:t,ccipRequest:n}=e,{args:[r]}=Pu({abi:zn,data:t}),s=[],o=[];return await Promise.all(r.map(async(i,c)=>{try{o[c]=i.urls.includes(cn)?await Bu({data:i.data,ccipRequest:n}):await n(i),s[c]=!1}catch(a){s[c]=!0,o[c]=Iu(a)}})),Eu({abi:zn,functionName:"query",result:[s,o]})}function Iu(e){return e.name==="HttpRequestError"&&e.status?Ts({abi:zn,errorName:"HttpError",args:[e.status,e.shortMessage]}):Ts({abi:[wo],errorName:"Error",args:["shortMessage"in e?e.shortMessage:e.message]})}function bi(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;const t=`0x${e.slice(1,65)}`;return bt(t)?t:null}function Vn(e){let t=new Uint8Array(32).fill(0);if(!e)return D(t);const n=e.split(".");for(let r=n.length-1;r>=0;r-=1){const s=bi(n[r]),o=s?jt(s):Me(lt(n[r]),"bytes");t=Me(oo([t,o]),"bytes")}return D(t)}function Au(e){return`[${e.slice(2)}]`}function $u(e){const t=new Uint8Array(32).fill(0);return e?bi(e)||Me(lt(e)):D(t)}function Nr(e){const t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);const n=new Uint8Array(lt(t).byteLength+2);let r=0;const s=t.split(".");for(let o=0;o<s.length;o++){let i=lt(s[o]);i.byteLength>255&&(i=lt(Au($u(s[o])))),n[r]=i.length,n.set(i,r+1),r+=i.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function Su(e,t){const{blockNumber:n,blockTag:r,coinType:s,name:o,gatewayUrls:i,strict:c}=t,{chain:a}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!a)throw new Error("client chain not configured. universalResolverAddress is required.");return at({blockNumber:n,chain:a,contract:"ensUniversalResolver"})})(),f=a?.ensTlds;if(f&&!f.some(l=>o.endsWith(l)))return null;const d=s!=null?[Vn(o),BigInt(s)]:[Vn(o)];try{const l=be({abi:ts,functionName:"addr",args:d}),b={address:u,abi:Vs,functionName:"resolveWithGateways",args:[Ue(Nr(o)),l,i??[cn]],blockNumber:n,blockTag:r},p=await _(e,de,"readContract")(b);if(p[0]==="0x")return null;const g=qe({abi:ts,args:d,functionName:"addr",data:p[0]});return g==="0x"||Ie(g)==="0x00"?null:g}catch(l){if(c)throw l;if(Tr(l))return null;throw l}}class Tu extends O{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}}class dt extends O{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}}class kr extends O{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Nu extends O{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const ku=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Fu=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Cu=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,Ru=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function zu(e){try{const t=await fetch(e,{method:"HEAD"});return t.status===200?t.headers.get("content-type")?.startsWith("image/"):!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=e})}}function Ns(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function hi({uri:e,gatewayUrls:t}){const n=Cu.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const r=Ns(t?.ipfs,"https://ipfs.io"),s=Ns(t?.arweave,"https://arweave.net"),o=e.match(ku),{protocol:i,subpath:c,target:a,subtarget:u=""}=o?.groups||{},f=i==="ipns:/"||c==="ipns/",d=i==="ipfs:/"||c==="ipfs/"||Fu.test(e);if(e.startsWith("http")&&!f&&!d){let b=e;return t?.arweave&&(b=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:b,isOnChain:!1,isEncoded:!1}}if((f||d)&&a)return{uri:`${r}/${f?"ipns":"ipfs"}/${a}${u}`,isOnChain:!1,isEncoded:!1};if(i==="ar:/"&&a)return{uri:`${s}/${a}${u||""}`,isOnChain:!1,isEncoded:!1};let l=e.replace(Ru,"");if(l.startsWith("<svg")&&(l=`data:image/svg+xml;base64,${btoa(l)}`),l.startsWith("data:")||l.startsWith("{"))return{uri:l,isOnChain:!0,isEncoded:!1};throw new kr({uri:e})}function pi(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new Tu({data:e});return e.image||e.image_url||e.image_data}async function _u({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then(s=>s.json());return await Fr({gatewayUrls:e,uri:pi(n)})}catch{throw new kr({uri:t})}}async function Fr({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:r}=hi({uri:t,gatewayUrls:e});if(r||await zu(n))return n;throw new kr({uri:t})}function Ou(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=t.split("/"),[o,i]=n.split(":"),[c,a]=r.split(":");if(!o||o.toLowerCase()!=="eip155")throw new dt({reason:"Only EIP-155 supported"});if(!i)throw new dt({reason:"Chain ID not found"});if(!a)throw new dt({reason:"Contract address not found"});if(!s)throw new dt({reason:"Token ID not found"});if(!c)throw new dt({reason:"ERC namespace not found"});return{chainID:Number.parseInt(i,10),namespace:c.toLowerCase(),contractAddress:a,tokenID:s}}async function Lu(e,{nft:t}){if(t.namespace==="erc721")return de(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return de(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new Nu({namespace:t.namespace})}async function Uu(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?Mu(e,{gatewayUrls:t,record:n}):Fr({uri:n,gatewayUrls:t})}async function Mu(e,{gatewayUrls:t,record:n}){const r=Ou(n),s=await Lu(e,{nft:r}),{uri:o,isOnChain:i,isEncoded:c}=hi({uri:s,gatewayUrls:t});if(i&&(o.includes("data:application/json;base64,")||o.startsWith("{"))){const u=c?atob(o.replace("data:application/json;base64,","")):o,f=JSON.parse(u);return Fr({uri:pi(f),gatewayUrls:t})}let a=r.tokenID;return r.namespace==="erc1155"&&(a=a.replace("0x","").padStart(64,"0")),_u({gatewayUrls:t,uri:o.replace(/(?:0x)?{id}/,a)})}async function mi(e,t){const{blockNumber:n,blockTag:r,key:s,name:o,gatewayUrls:i,strict:c}=t,{chain:a}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!a)throw new Error("client chain not configured. universalResolverAddress is required.");return at({blockNumber:n,chain:a,contract:"ensUniversalResolver"})})(),f=a?.ensTlds;if(f&&!f.some(d=>o.endsWith(d)))return null;try{const d={address:u,abi:Vs,args:[Ue(Nr(o)),be({abi:ns,functionName:"text",args:[Vn(o),s]}),i??[cn]],functionName:"resolveWithGateways",blockNumber:n,blockTag:r},b=await _(e,de,"readContract")(d);if(b[0]==="0x")return null;const m=qe({abi:ns,functionName:"text",data:b[0]});return m===""?null:m}catch(d){if(c)throw d;if(Tr(d))return null;throw d}}async function Gu(e,{blockNumber:t,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:o,strict:i,universalResolverAddress:c}){const a=await _(e,mi,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:s,universalResolverAddress:c,gatewayUrls:o,strict:i});if(!a)return null;try{return await Uu(e,{record:a,gatewayUrls:r})}catch{return null}}async function Hu(e,t){const{address:n,blockNumber:r,blockTag:s,coinType:o=60n,gatewayUrls:i,strict:c}=t,{chain:a}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!a)throw new Error("client chain not configured. universalResolverAddress is required.");return at({blockNumber:r,chain:a,contract:"ensUniversalResolver"})})();try{const f={address:u,abi:ra,args:[n,o,i??[cn]],functionName:"reverseWithGateways",blockNumber:r,blockTag:s},d=_(e,de,"readContract"),[l]=await d(f);return l||null}catch(f){if(c)throw f;if(Tr(f))return null;throw f}}async function ju(e,t){const{blockNumber:n,blockTag:r,name:s}=t,{chain:o}=e,i=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!o)throw new Error("client chain not configured. universalResolverAddress is required.");return at({blockNumber:n,chain:o,contract:"ensUniversalResolver"})})(),c=o?.ensTlds;if(c&&!c.some(u=>s.endsWith(u)))throw new Error(`${s} is not a valid ENS TLD (${c?.join(", ")}) for chain "${o.name}" (id: ${o.id}).`);const[a]=await _(e,de,"readContract")({address:i,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Ue(Nr(s))],blockNumber:n,blockTag:r});return a}async function yi(e,t){const{account:n=e.account,blockNumber:r,blockTag:s="latest",blobs:o,data:i,gas:c,gasPrice:a,maxFeePerBlobGas:u,maxFeePerGas:f,maxPriorityFeePerGas:d,to:l,value:b,...m}=t,p=n?Q(n):void 0;try{it(t);const P=(typeof r=="bigint"?T(r):void 0)||s,B=e.chain?.formatters?.transactionRequest?.format,h=(B||At)({...Yt(m,{format:B}),account:p,blobs:o,data:i,gas:c,gasPrice:a,maxFeePerBlobGas:u,maxFeePerGas:f,maxPriorityFeePerGas:d,to:l,value:b},"createAccessList"),y=await e.request({method:"eth_createAccessList",params:[h,P]});return{accessList:y.accessList,gasUsed:BigInt(y.gasUsed)}}catch(g){throw fi(g,{...t,account:p,chain:e.chain})}}async function Du(e){const t=Zt(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}async function gi(e,{address:t,args:n,event:r,events:s,fromBlock:o,strict:i,toBlock:c}={}){const a=s??(r?[r]:void 0),u=Zt(e,{method:"eth_newFilter"});let f=[];a&&(f=[a.flatMap(b=>Et({abi:[b],eventName:b.name,args:n}))],r&&(f=f[0]));const d=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof o=="bigint"?T(o):o,toBlock:typeof c=="bigint"?T(c):c,...f.length?{topics:f}:{}}]});return{abi:a,args:n,eventName:r?r.name:void 0,fromBlock:o,id:d,request:u(d),strict:!!i,toBlock:c,type:"event"}}async function wi(e){const t=Zt(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}async function Vu(e,{address:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest"}){const s=typeof n=="bigint"?T(n):void 0,o=await e.request({method:"eth_getBalance",params:[t,s||r]});return BigInt(o)}async function qu(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}async function Zu(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?T(n):void 0;let o;return t?o=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):o=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),re(o)}async function qn(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?T(n):void 0,o=await e.request({method:"eth_getCode",params:[t,s||r]},{dedupe:!!s});if(o!=="0x")return o}class Wu extends O{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function Ku(e,t){const{address:n,factory:r,factoryData:s}=t;try{const[o,i,c,a,u,f,d]=await _(e,de,"readContract")({abi:Yu,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:i,version:c,chainId:Number(a),verifyingContract:u,salt:f},extensions:d,fields:o}}catch(o){const i=o;throw i.name==="ContractFunctionExecutionError"&&i.cause.name==="ContractFunctionZeroDataError"?new Wu({address:n}):i}}const Yu=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function Ju(e){return{baseFeePerGas:e.baseFeePerGas.map(t=>BigInt(t)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:e.reward?.map(t=>t.map(n=>BigInt(n)))}}async function Xu(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const o=typeof n=="bigint"?T(n):void 0,i=await e.request({method:"eth_feeHistory",params:[T(t),o||r,s]},{dedupe:!!o});return Ju(i)}async function Qu(e,{filter:t}){const n=t.strict??!1,s=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(o=>Se(o));return t.abi?xr({abi:t.abi,logs:s,strict:n}):s}function Bl(e,t){if(e.length!==t.length)throw new ma({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const s=e[r],o=t[r];n.push(xi(s,o))}return le(n)}function xi(e,t,n=!1){if(e==="address"){const i=t;if(!se(i))throw new ce({address:i});return pn(i.toLowerCase(),{size:n?32:null})}if(e==="string")return sa(t);if(e==="bytes")return t;if(e==="bool")return pn(oa(t),{size:n?32:1});const r=e.match(ya);if(r){const[i,c,a="256"]=r,u=Number.parseInt(a,10)/8;return T(t,{size:n?32:u,signed:c==="int"})}const s=e.match(ga);if(s){const[i,c]=s;if(Number.parseInt(c,10)!==(t.length-2)/2)throw new wa({expectedSize:Number.parseInt(c,10),givenSize:(t.length-2)/2});return pn(t,{dir:"right",size:n?32:null})}const o=e.match(xa);if(o&&Array.isArray(t)){const[i,c]=o,a=[];for(let u=0;u<t.length;u++)a.push(xi(c,t[u],!0));return a.length===0?"0x":le(a)}throw new va(e)}function ef(e){const{authorizationList:t}=e;if(t)for(const n of t){const{chainId:r}=n,s=n.address;if(!se(s))throw new ce({address:s});if(r<0)throw new rn({chainId:r})}Cr(e)}function tf(e){const{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new Mo;for(const n of t){const r=Ce(n),s=re(ht(n,0,1));if(r!==32)throw new hc({hash:n,size:r});if(s!==Uo)throw new pc({hash:n,version:s})}}Cr(e)}function Cr(e){const{chainId:t,maxPriorityFeePerGas:n,maxFeePerGas:r,to:s}=e;if(t<=0)throw new rn({chainId:t});if(s&&!se(s))throw new ce({address:s});if(r&&r>Jt)throw new nt({maxFeePerGas:r});if(n&&r&&n>r)throw new zt({maxFeePerGas:r,maxPriorityFeePerGas:n})}function nf(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:o}=e;if(t<=0)throw new rn({chainId:t});if(o&&!se(o))throw new ce({address:o});if(n||s)throw new O("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>Jt)throw new nt({maxFeePerGas:r})}function rf(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:o}=e;if(o&&!se(o))throw new ce({address:o});if(typeof t<"u"&&t<=0)throw new rn({chainId:t});if(n||s)throw new O("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>Jt)throw new nt({maxFeePerGas:r})}function un(e){if(!e||e.length===0)return[];const t=[];for(let n=0;n<e.length;n++){const{address:r,storageKeys:s}=e[n];for(let o=0;o<s.length;o++)if(s[o].length-2!==64)throw new O0({storageKey:s[o]});if(!se(r,{strict:!1}))throw new ce({address:r});t.push([r,s])}return t}function Il(e,t){const n=Ho(e);return n==="eip1559"?af(e,t):n==="eip2930"?cf(e,t):n==="eip4844"?of(e,t):n==="eip7702"?sf(e,t):uf(e,t)}function sf(e,t){const{authorizationList:n,chainId:r,gas:s,nonce:o,to:i,value:c,maxFeePerGas:a,maxPriorityFeePerGas:u,accessList:f,data:d}=e;ef(e);const l=un(f),b=ff(n);return le(["0x04",Ge([T(r),o?T(o):"0x",u?T(u):"0x",a?T(a):"0x",s?T(s):"0x",i??"0x",c?T(c):"0x",d??"0x",l,b,...kt(e,t)])])}function of(e,t){const{chainId:n,gas:r,nonce:s,to:o,value:i,maxFeePerBlobGas:c,maxFeePerGas:a,maxPriorityFeePerGas:u,accessList:f,data:d}=e;tf(e);let l=e.blobVersionedHashes,b=e.sidecars;if(e.blobs&&(typeof l>"u"||typeof b>"u")){const w=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(x=>D(x)),h=e.kzg,y=hr({blobs:w,kzg:h});if(typeof l>"u"&&(l=_o({commitments:y})),typeof b>"u"){const x=pr({blobs:w,commitments:y,kzg:h});b=Go({blobs:w,commitments:y,proofs:x})}}const m=un(f),p=[T(n),s?T(s):"0x",u?T(u):"0x",a?T(a):"0x",r?T(r):"0x",o??"0x",i?T(i):"0x",d??"0x",m,c?T(c):"0x",l??[],...kt(e,t)],g=[],P=[],B=[];if(b)for(let w=0;w<b.length;w++){const{blob:h,commitment:y,proof:x}=b[w];g.push(h),P.push(y),B.push(x)}return le(["0x03",Ge(b?[p,g,P,B]:p)])}function af(e,t){const{chainId:n,gas:r,nonce:s,to:o,value:i,maxFeePerGas:c,maxPriorityFeePerGas:a,accessList:u,data:f}=e;Cr(e);const d=un(u),l=[T(n),s?T(s):"0x",a?T(a):"0x",c?T(c):"0x",r?T(r):"0x",o??"0x",i?T(i):"0x",f??"0x",d,...kt(e,t)];return le(["0x02",Ge(l)])}function cf(e,t){const{chainId:n,gas:r,data:s,nonce:o,to:i,value:c,accessList:a,gasPrice:u}=e;nf(e);const f=un(a),d=[T(n),o?T(o):"0x",u?T(u):"0x",r?T(r):"0x",i??"0x",c?T(c):"0x",s??"0x",f,...kt(e,t)];return le(["0x01",Ge(d)])}function uf(e,t){const{chainId:n=0,gas:r,data:s,nonce:o,to:i,value:c,gasPrice:a}=e;rf(e);let u=[o?T(o):"0x",a?T(a):"0x",r?T(r):"0x",i??"0x",c?T(c):"0x",s??"0x"];if(t){const f=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+t.v-27n);const b=27n+(t.v===27n?0n:1n);if(t.v!==b)throw new z0({v:t.v});return b})(),d=Ie(t.r),l=Ie(t.s);u=[...u,T(f),d==="0x00"?"0x":d,l==="0x00"?"0x":l]}else n>0&&(u=[...u,T(n),"0x","0x"]);return Ge(u)}function kt(e,t){const n=t??e,{v:r,yParity:s}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];const o=Ie(n.r),i=Ie(n.s);return[typeof s=="number"?s?T(1):"0x":r===0n?"0x":r===1n?T(1):r===27n?"0x":T(1),o==="0x00"?"0x":o,i==="0x00"?"0x":i]}function ff(e){if(!e||e.length===0)return[];const t=[];for(const n of e){const{chainId:r,nonce:s,...o}=n,i=n.address;t.push([r?Ue(r):"0x",i,s?Ue(s):"0x",...kt({},o)])}return t}async function df({address:e,authorization:t,signature:n}){return Qt(io(e),await To({authorization:t,signature:n}))}function Al(e){const{source:t}=e,n=new Map,r=new js(8192),s=new Map,o=({address:i,chainId:c})=>`${i}.${c}`;return{async consume({address:i,chainId:c,client:a}){const u=o({address:i,chainId:c}),f=this.get({address:i,chainId:c,client:a});this.increment({address:i,chainId:c});const d=await f;return await t.set({address:i,chainId:c},d),r.set(u,d),d},async increment({address:i,chainId:c}){const a=o({address:i,chainId:c}),u=n.get(a)??0;n.set(a,u+1)},async get({address:i,chainId:c,client:a}){const u=o({address:i,chainId:c});let f=s.get(u);return f||(f=(async()=>{try{const l=await t.get({address:i,chainId:c,client:a}),b=r.get(u)??0;return b>0&&l<=b?b+1:(r.delete(u),l)}finally{this.reset({address:i,chainId:c})}})(),s.set(u,f)),(n.get(u)??0)+await f},reset({address:i,chainId:c}){const a=o({address:i,chainId:c});n.delete(a),s.delete(a)}}}const lf="0x6492649264926492649264926492649264926492649264926492649264926492";class bf extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const hf={checksum:new bf(8192)},An=hf.checksum;function vi(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=Pa(Rc(e));return n==="Bytes"?r:fe(r)}const pf=/^0x[a-fA-F0-9]{40}$/;function fn(e,t={}){const{strict:n=!0}=t;if(!pf.test(e))throw new ks({address:e,cause:new mf});if(n){if(e.toLowerCase()===e)return;if(Pi(e)!==e)throw new ks({address:e,cause:new yf})}}function Pi(e){if(An.has(e))return An.get(e);fn(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=vi(_c(t),{as:"Bytes"}),r=t.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&r[o]&&(r[o]=r[o].toUpperCase()),(n[o>>1]&15)>=8&&r[o+1]&&(r[o+1]=r[o+1].toUpperCase());const s=`0x${r.join("")}`;return An.set(e,s),s}function Zn(e,t={}){const{strict:n=!0}=t??{};try{return fn(e,{strict:n}),!0}catch{return!1}}class ks extends M{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class mf extends M{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class yf extends M{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const gf=/^(.*)\[([0-9]*)\]$/,wf=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Ei=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Fs=2n**256n-1n;function tt(e,t,n){const{checksumAddress:r,staticPosition:s}=n,o=_r(t.type);if(o){const[i,c]=o;return vf(e,{...t,type:c},{checksumAddress:r,length:i,staticPosition:s})}if(t.type==="tuple")return If(e,t,{checksumAddress:r,staticPosition:s});if(t.type==="address")return xf(e,{checksum:r});if(t.type==="bool")return Pf(e);if(t.type.startsWith("bytes"))return Ef(e,t,{staticPosition:s});if(t.type.startsWith("uint")||t.type.startsWith("int"))return Bf(e,t);if(t.type==="string")return Af(e,{staticPosition:s});throw new Lr(t.type)}const Cs=32,Wn=32;function xf(e,t={}){const{checksum:n=!1}=t,r=e.readBytes(32);return[(o=>n?Pi(o):o)(fe(Lc(r,-20))),32]}function vf(e,t,n){const{checksumAddress:r,length:s,staticPosition:o}=n;if(!s){const a=Be(e.readBytes(Wn)),u=o+a,f=u+Cs;e.setPosition(u);const d=Be(e.readBytes(Cs)),l=wt(t);let b=0;const m=[];for(let p=0;p<d;++p){e.setPosition(f+(l?p*32:b));const[g,P]=tt(e,t,{checksumAddress:r,staticPosition:f});b+=P,m.push(g)}return e.setPosition(o+32),[m,32]}if(wt(t)){const a=Be(e.readBytes(Wn)),u=o+a,f=[];for(let d=0;d<s;++d){e.setPosition(u+d*32);const[l]=tt(e,t,{checksumAddress:r,staticPosition:u});f.push(l)}return e.setPosition(o+32),[f,32]}let i=0;const c=[];for(let a=0;a<s;++a){const[u,f]=tt(e,t,{checksumAddress:r,staticPosition:o+i});i+=f,c.push(u)}return[c,i]}function Pf(e){return[Mc(e.readBytes(32),{size:32}),32]}function Ef(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const i=Be(e.readBytes(32));e.setPosition(n+i);const c=Be(e.readBytes(32));if(c===0)return e.setPosition(n+32),["0x",32];const a=e.readBytes(c);return e.setPosition(n+32),[fe(a),32]}return[fe(e.readBytes(Number.parseInt(s,10),32)),32]}function Bf(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),s=e.readBytes(32);return[r>48?Uc(s,{signed:n}):Be(s,{signed:n}),32]}function If(e,t,n){const{checksumAddress:r,staticPosition:s}=n,o=t.components.length===0||t.components.some(({name:a})=>!a),i=o?[]:{};let c=0;if(wt(t)){const a=Be(e.readBytes(Wn)),u=s+a;for(let f=0;f<t.components.length;++f){const d=t.components[f];e.setPosition(u+c);const[l,b]=tt(e,d,{checksumAddress:r,staticPosition:u});c+=b,i[o?f:d?.name]=l}return e.setPosition(s+32),[i,32]}for(let a=0;a<t.components.length;++a){const u=t.components[a],[f,d]=tt(e,u,{checksumAddress:r,staticPosition:s});i[o?a:u?.name]=f,c+=d}return[i,c]}function Af(e,{staticPosition:t}){const n=Be(e.readBytes(32)),r=t+n;e.setPosition(r);const s=Be(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const o=e.readBytes(s,32),i=Gc(ti(o));return e.setPosition(t+32),[i,32]}function $f({checksumAddress:e,parameters:t,values:n}){const r=[];for(let s=0;s<t.length;s++)r.push(Rr({checksumAddress:e,parameter:t[s],value:n[s]}));return r}function Rr({checksumAddress:e=!1,parameter:t,value:n}){const r=t,s=_r(r.type);if(s){const[o,i]=s;return Tf(n,{checksumAddress:e,length:o,parameter:{...r,type:i}})}if(r.type==="tuple")return Rf(n,{checksumAddress:e,parameter:r});if(r.type==="address")return Sf(n,{checksum:e});if(r.type==="bool")return kf(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const o=r.type.startsWith("int"),[,,i="256"]=Ei.exec(r.type)??[];return Ff(n,{signed:o,size:Number(i)})}if(r.type.startsWith("bytes"))return Nf(n,{type:r.type});if(r.type==="string")return Cf(n);throw new Lr(r.type)}function zr(e){let t=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:c}=e[o];i?t+=32:t+=ee(c)}const n=[],r=[];let s=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:c}=e[o];i?(n.push(q(t+s,{size:32})),r.push(c),s+=ee(c)):n.push(c)}return ue(...n,...r)}function Sf(e,t){const{checksum:n=!1}=t;return fn(e,{strict:n}),{dynamic:!1,encoded:He(e.toLowerCase())}}function Tf(e,t){const{checksumAddress:n,length:r,parameter:s}=t,o=r===null;if(!Array.isArray(e))throw new jf(e);if(!o&&e.length!==r)throw new Hf({expectedLength:r,givenLength:e.length,type:`${s.type}[${r}]`});let i=!1;const c=[];for(let a=0;a<e.length;a++){const u=Rr({checksumAddress:n,parameter:s,value:e[a]});u.dynamic&&(i=!0),c.push(u)}if(o||i){const a=zr(c);if(o){const u=q(c.length,{size:32});return{dynamic:!0,encoded:c.length>0?ue(u,a):u}}if(i)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:ue(...c.map(({encoded:a})=>a))}}function Nf(e,{type:t}){const[,n]=t.split("bytes"),r=ee(e);if(!n){let s=e;return r%32!==0&&(s=je(s,Math.ceil((e.length-2)/2/32)*32)),{dynamic:!0,encoded:ue(He(q(r,{size:32})),s)}}if(r!==Number.parseInt(n,10))throw new Ii({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:je(e)}}function kf(e){if(typeof e!="boolean")throw new M(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:He(ni(e))}}function Ff(e,{signed:t,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new oi({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:q(e,{size:32,signed:t})}}function Cf(e){const t=Ir(e),n=Math.ceil(ee(t)/32),r=[];for(let s=0;s<n;s++)r.push(je(ye(t,s*32,(s+1)*32)));return{dynamic:!0,encoded:ue(je(q(ee(t),{size:32})),...r)}}function Rf(e,t){const{checksumAddress:n,parameter:r}=t;let s=!1;const o=[];for(let i=0;i<r.components.length;i++){const c=r.components[i],a=Array.isArray(e)?i:c.name,u=Rr({checksumAddress:n,parameter:c,value:e[a]});o.push(u),u.dynamic&&(s=!0)}return{dynamic:s,encoded:s?zr(o):ue(...o.map(({encoded:i})=>i))}}function _r(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function wt(e){const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return e.components?.some(wt);const n=_r(e.type);return!!(n&&wt({...e,type:n[1]}))}const zf={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Lf({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new Of({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new Rs({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new Rs({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function _f(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(zf);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}class Rs extends M{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}class Of extends M{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}class Lf extends M{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}function Uf(e,t,n={}){const{as:r="Array",checksumAddress:s=!1}=n,o=typeof t=="string"?ei(t):t,i=_f(o);if(Je(o)===0&&e.length>0)throw new Gf;if(Je(o)&&Je(o)<32)throw new Mf({data:typeof t=="string"?t:fe(t),parameters:e,size:Je(o)});let c=0;const a=r==="Array"?[]:{};for(let u=0;u<e.length;++u){const f=e[u];i.setPosition(c);const[d,l]=tt(i,f,{checksumAddress:s,staticPosition:0});c+=l,r==="Array"?a.push(d):a[f.name??u]=d}return a}function Or(e,t,n){const{checksumAddress:r=!1}={};if(e.length!==t.length)throw new Ai({expectedLength:e.length,givenLength:t.length});const s=$f({checksumAddress:r,parameters:e,values:t}),o=zr(s);return o.length===0?"0x":o}function Kn(e,t){if(e.length!==t.length)throw new Ai({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const s=e[r],o=t[r];n.push(Kn.encode(s,o))}return ue(...n)}(function(e){function t(n,r,s=!1){if(n==="address"){const a=r;return fn(a),He(a.toLowerCase(),s?32:0)}if(n==="string")return Ir(r);if(n==="bytes")return r;if(n==="bool")return He(ni(r),s?32:1);const o=n.match(Ei);if(o){const[a,u,f="256"]=o,d=Number.parseInt(f,10)/8;return q(r,{size:s?32:d,signed:u==="int"})}const i=n.match(wf);if(i){const[a,u]=i;if(Number.parseInt(u,10)!==(r.length-2)/2)throw new Ii({expectedSize:Number.parseInt(u,10),value:r});return je(r,s?32:0)}const c=n.match(gf);if(c&&Array.isArray(r)){const[a,u]=c,f=[];for(let d=0;d<r.length;d++)f.push(t(u,r[d],!0));return f.length===0?"0x":ue(...f)}throw new Lr(n)}e.encode=t})(Kn||(Kn={}));function Bi(e){return Array.isArray(e)&&typeof e[0]=="string"||typeof e=="string"?fs(e):e}class Mf extends M{constructor({data:t,parameters:n,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${Ea(n)})`,`Data:   ${t} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class Gf extends M{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class Hf extends M{constructor({expectedLength:t,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${t}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class Ii extends M{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${ee(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class Ai extends M{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class jf extends M{constructor(t){super(`Value \`${t}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class Lr extends M{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}class $i extends eo{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Ba(t);const r=to(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?t.create().update(r).digest():r);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=t.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),Lt(o)}update(t){return Ot(this),this.iHash.update(t),this}digestInto(t){Ot(this),no(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:o,blockLen:i,outputLen:c}=this;return t=t,t.finished=s,t.destroyed=o,t.blockLen=i,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Si=(e,t,n)=>new $i(e,t).update(n).digest();Si.create=(e,t)=>new $i(e,t);const Y=BigInt(0),Z=BigInt(1),Oe=BigInt(2),Df=BigInt(3),Ti=BigInt(4),Ni=BigInt(5),ki=BigInt(8);function K(e,t){const n=e%t;return n>=Y?n:t+n}function te(e,t,n){let r=e;for(;t-- >Y;)r*=r,r%=n;return r}function Yn(e,t){if(e===Y)throw new Error("invert: expected non-zero number");if(t<=Y)throw new Error("invert: expected positive modulus, got "+t);let n=K(e,t),r=t,s=Y,o=Z;for(;n!==Y;){const c=r/n,a=r%n,u=s-o*c;r=n,n=a,s=o,o=u}if(r!==Z)throw new Error("invert: does not exist");return K(s,t)}function Fi(e,t){const n=(e.ORDER+Z)/Ti,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function Vf(e,t){const n=(e.ORDER-Ni)/ki,r=e.mul(t,Oe),s=e.pow(r,n),o=e.mul(t,s),i=e.mul(e.mul(o,Oe),s),c=e.mul(o,e.sub(i,e.ONE));if(!e.eql(e.sqr(c),t))throw new Error("Cannot find square root");return c}function qf(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-Z,n=0;for(;t%Oe===Y;)t/=Oe,n++;let r=Oe;const s=Ur(e);for(;zs(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Fi;let o=s.pow(r,t);const i=(t+Z)/Oe;return function(a,u){if(a.is0(u))return u;if(zs(a,u)!==1)throw new Error("Cannot find square root");let f=n,d=a.mul(a.ONE,o),l=a.pow(u,t),b=a.pow(u,i);for(;!a.eql(l,a.ONE);){if(a.is0(l))return a.ZERO;let m=1,p=a.sqr(l);for(;!a.eql(p,a.ONE);)if(m++,p=a.sqr(p),m===f)throw new Error("Cannot find square root");const g=Z<<BigInt(f-m-1),P=a.pow(d,g);f=m,d=a.sqr(P),l=a.mul(l,d),b=a.mul(b,P)}return b}}function Zf(e){return e%Ti===Df?Fi:e%ki===Ni?Vf:qf(e)}const Wf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Kf(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Wf.reduce((r,s)=>(r[s]="function",r),t);return tn(e,n)}function Yf(e,t,n){if(n<Y)throw new Error("invalid exponent, negatives unsupported");if(n===Y)return e.ONE;if(n===Z)return t;let r=e.ONE,s=t;for(;n>Y;)n&Z&&(r=e.mul(r,s)),s=e.sqr(s),n>>=Z;return r}function Ci(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),s=t.reduce((i,c,a)=>e.is0(c)?i:(r[a]=i,e.mul(i,c)),e.ONE),o=e.inv(s);return t.reduceRight((i,c,a)=>e.is0(c)?i:(r[a]=e.mul(i,r[a]),e.mul(i,c)),o),r}function zs(e,t){const n=(e.ORDER-Z)/Oe,r=e.pow(t,n),s=e.eql(r,e.ONE),o=e.eql(r,e.ZERO),i=e.eql(r,e.neg(e.ONE));if(!s&&!o&&!i)throw new Error("invalid Legendre symbol result");return s?1:o?0:-1}function Ri(e,t){t!==void 0&&Ia(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Ur(e,t,n=!1,r={}){if(e<=Y)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:s,nByteLength:o}=Ri(e,t);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let i;const c=Object.freeze({ORDER:e,isLE:n,BITS:s,BYTES:o,MASK:en(s),ZERO:Y,ONE:Z,create:a=>K(a,e),isValid:a=>{if(typeof a!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof a);return Y<=a&&a<e},is0:a=>a===Y,isOdd:a=>(a&Z)===Z,neg:a=>K(-a,e),eql:(a,u)=>a===u,sqr:a=>K(a*a,e),add:(a,u)=>K(a+u,e),sub:(a,u)=>K(a-u,e),mul:(a,u)=>K(a*u,e),pow:(a,u)=>Yf(c,a,u),div:(a,u)=>K(a*Yn(u,e),e),sqrN:a=>a*a,addN:(a,u)=>a+u,subN:(a,u)=>a-u,mulN:(a,u)=>a*u,inv:a=>Yn(a,e),sqrt:r.sqrt||(a=>(i||(i=Zf(e)),i(c,a))),toBytes:a=>n?Ko(a,o):St(a,o),fromBytes:a=>{if(a.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+a.length);return n?Wo(a):Le(a)},invertBatch:a=>Ci(c,a),cmov:(a,u,f)=>f?u:a});return Object.freeze(c)}function zi(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function _i(e){const t=zi(e);return t+Math.ceil(t/2)}function Jf(e,t,n=!1){const r=e.length,s=zi(t),o=_i(t);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const i=n?Wo(e):Le(e),c=K(i,t-Z)+Z;return n?Ko(c,s):St(c,s)}const _s=BigInt(0),Jn=BigInt(1);function $n(e,t){const n=t.negate();return e?n:t}function Oi(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Sn(e,t){Oi(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),s=2**e,o=en(e),i=BigInt(e);return{windows:n,windowSize:r,mask:o,maxNumber:s,shiftBy:i}}function Os(e,t,n){const{windowSize:r,mask:s,maxNumber:o,shiftBy:i}=n;let c=Number(e&s),a=e>>i;c>r&&(c-=o,a+=Jn);const u=t*r,f=u+Math.abs(c)-1,d=c===0,l=c<0,b=t%2!==0;return{nextN:a,offset:f,isZero:d,isNeg:l,isNegF:b,offsetF:u}}function Xf(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function Qf(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Tn=new WeakMap,Li=new WeakMap;function Nn(e){return Li.get(e)||1}function ed(e,t){return{constTimeNegate:$n,hasPrecomputes(n){return Nn(n)!==1},unsafeLadder(n,r,s=e.ZERO){let o=n;for(;r>_s;)r&Jn&&(s=s.add(o)),o=o.double(),r>>=Jn;return s},precomputeWindow(n,r){const{windows:s,windowSize:o}=Sn(r,t),i=[];let c=n,a=c;for(let u=0;u<s;u++){a=c,i.push(a);for(let f=1;f<o;f++)a=a.add(c),i.push(a);c=a.double()}return i},wNAF(n,r,s){let o=e.ZERO,i=e.BASE;const c=Sn(n,t);for(let a=0;a<c.windows;a++){const{nextN:u,offset:f,isZero:d,isNeg:l,isNegF:b,offsetF:m}=Os(s,a,c);s=u,d?i=i.add($n(b,r[m])):o=o.add($n(l,r[f]))}return{p:o,f:i}},wNAFUnsafe(n,r,s,o=e.ZERO){const i=Sn(n,t);for(let c=0;c<i.windows&&s!==_s;c++){const{nextN:a,offset:u,isZero:f,isNeg:d}=Os(s,c,i);if(s=a,!f){const l=r[u];o=o.add(d?l.negate():l)}}return o},getPrecomputes(n,r,s){let o=Tn.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&Tn.set(r,s(o))),o},wNAFCached(n,r,s){const o=Nn(n);return this.wNAF(o,this.getPrecomputes(o,n,s),r)},wNAFCachedUnsafe(n,r,s,o){const i=Nn(n);return i===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(i,this.getPrecomputes(i,n,s),r,o)},setWindowSize(n,r){Oi(r,t),Li.set(n,r),Tn.delete(n)}}}function td(e,t,n,r){Xf(n,e),Qf(r,t);const s=n.length,o=r.length;if(s!==o)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,c=Ec(BigInt(s));let a=1;c>12?a=c-3:c>4?a=c-2:c>0&&(a=2);const u=en(a),f=new Array(Number(u)+1).fill(i),d=Math.floor((t.BITS-1)/a)*a;let l=i;for(let b=d;b>=0;b-=a){f.fill(i);for(let p=0;p<o;p++){const g=r[p],P=Number(g>>BigInt(b)&u);f[P]=f[P].add(n[p])}let m=i;for(let p=f.length-1,g=i;p>0;p--)g=g.add(f[p]),m=m.add(g);if(l=l.add(m),b!==0)for(let p=0;p<a;p++)l=l.double()}return l}function Ui(e){return Kf(e.Fp),tn(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ri(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function Ls(e){e.lowS!==void 0&&yt("lowS",e.lowS),e.prehash!==void 0&&yt("prehash",e.prehash)}function nd(e){const t=Ui(e);tn(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}class rd extends Error{constructor(t=""){super(t)}}const ve={Err:rd,_tlv:{encode:(e,t)=>{const{Err:n}=ve;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=Ct(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?Ct(s.length/2|128):"";return Ct(e)+o+s+t},decode(e,t){const{Err:n}=ve;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++],o=!!(s&128);let i=0;if(!o)i=s;else{const a=s&127;if(!a)throw new n("tlv.decode(long): indefinite length not supported");if(a>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+a);if(u.length!==a)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const f of u)i=i<<8|f;if(r+=a,i<128)throw new n("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+i);if(c.length!==i)throw new n("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+i)}}},_int:{encode(e){const{Err:t}=ve;if(e<Pe)throw new t("integer: negative integers are not allowed");let n=Ct(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=ve;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Le(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=ve,s=ne("signature",e),{v:o,l:i}=r.decode(48,s);if(i.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:a}=r.decode(2,o),{v:u,l:f}=r.decode(2,a);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=ve,r=t.encode(2,n.encode(e.r)),s=t.encode(2,n.encode(e.s)),o=r+s;return t.encode(48,o)}};function kn(e,t){return gt(St(e,t))}const Pe=BigInt(0),j=BigInt(1);BigInt(2);const Fn=BigInt(3),sd=BigInt(4);function od(e){const t=nd(e),{Fp:n}=t,r=Ur(t.n,t.nBitLength),s=t.toBytes||((w,h,y)=>{const x=h.toAffine();return Gt(Uint8Array.from([4]),n.toBytes(x.x),n.toBytes(x.y))}),o=t.fromBytes||(w=>{const h=w.subarray(1),y=n.fromBytes(h.subarray(0,n.BYTES)),x=n.fromBytes(h.subarray(n.BYTES,2*n.BYTES));return{x:y,y:x}});function i(w){const{a:h,b:y}=t,x=n.sqr(w),v=n.mul(x,w);return n.add(n.add(v,n.mul(w,h)),y)}function c(w,h){const y=n.sqr(h),x=i(w);return n.eql(y,x)}if(!c(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const a=n.mul(n.pow(t.a,Fn),sd),u=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(a,u)))throw new Error("bad curve params: a or b");function f(w){return Br(w,j,t.n)}function d(w){const{allowedPrivateKeyLengths:h,nByteLength:y,wrapPrivateKey:x,n:v}=t;if(h&&typeof w!="bigint"){if($t(w)&&(w=gt(w)),typeof w!="string"||!h.includes(w.length))throw new Error("invalid private key");w=w.padStart(y*2,"0")}let $;try{$=typeof w=="bigint"?w:Le(ne("private key",w,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof w)}return x&&($=K($,v)),et("private key",$,j,v),$}function l(w){if(!(w instanceof p))throw new Error("ProjectivePoint expected")}const b=Bs((w,h)=>{const{px:y,py:x,pz:v}=w;if(n.eql(v,n.ONE))return{x:y,y:x};const $=w.is0();h==null&&(h=$?n.ONE:n.inv(v));const k=n.mul(y,h),E=n.mul(x,h),N=n.mul(v,h);if($)return{x:n.ZERO,y:n.ZERO};if(!n.eql(N,n.ONE))throw new Error("invZ was invalid");return{x:k,y:E}}),m=Bs(w=>{if(w.is0()){if(t.allowInfinityPoint&&!n.is0(w.py))return;throw new Error("bad point: ZERO")}const{x:h,y}=w.toAffine();if(!n.isValid(h)||!n.isValid(y))throw new Error("bad point: x or y not FE");if(!c(h,y))throw new Error("bad point: equation left != right");if(!w.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class p{constructor(h,y,x){if(h==null||!n.isValid(h))throw new Error("x required");if(y==null||!n.isValid(y)||n.is0(y))throw new Error("y required");if(x==null||!n.isValid(x))throw new Error("z required");this.px=h,this.py=y,this.pz=x,Object.freeze(this)}static fromAffine(h){const{x:y,y:x}=h||{};if(!h||!n.isValid(y)||!n.isValid(x))throw new Error("invalid affine point");if(h instanceof p)throw new Error("projective point not allowed");const v=$=>n.eql($,n.ZERO);return v(y)&&v(x)?p.ZERO:new p(y,x,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(h){const y=Ci(n,h.map(x=>x.pz));return h.map((x,v)=>x.toAffine(y[v])).map(p.fromAffine)}static fromHex(h){const y=p.fromAffine(o(ne("pointHex",h)));return y.assertValidity(),y}static fromPrivateKey(h){return p.BASE.multiply(d(h))}static msm(h,y){return td(p,r,h,y)}_setWindowSize(h){B.setWindowSize(this,h)}assertValidity(){m(this)}hasEvenY(){const{y:h}=this.toAffine();if(n.isOdd)return!n.isOdd(h);throw new Error("Field doesn't support isOdd")}equals(h){l(h);const{px:y,py:x,pz:v}=this,{px:$,py:k,pz:E}=h,N=n.eql(n.mul(y,E),n.mul($,v)),R=n.eql(n.mul(x,E),n.mul(k,v));return N&&R}negate(){return new p(this.px,n.neg(this.py),this.pz)}double(){const{a:h,b:y}=t,x=n.mul(y,Fn),{px:v,py:$,pz:k}=this;let E=n.ZERO,N=n.ZERO,R=n.ZERO,F=n.mul(v,v),U=n.mul($,$),A=n.mul(k,k),I=n.mul(v,$);return I=n.add(I,I),R=n.mul(v,k),R=n.add(R,R),E=n.mul(h,R),N=n.mul(x,A),N=n.add(E,N),E=n.sub(U,N),N=n.add(U,N),N=n.mul(E,N),E=n.mul(I,E),R=n.mul(x,R),A=n.mul(h,A),I=n.sub(F,A),I=n.mul(h,I),I=n.add(I,R),R=n.add(F,F),F=n.add(R,F),F=n.add(F,A),F=n.mul(F,I),N=n.add(N,F),A=n.mul($,k),A=n.add(A,A),F=n.mul(A,I),E=n.sub(E,F),R=n.mul(A,U),R=n.add(R,R),R=n.add(R,R),new p(E,N,R)}add(h){l(h);const{px:y,py:x,pz:v}=this,{px:$,py:k,pz:E}=h;let N=n.ZERO,R=n.ZERO,F=n.ZERO;const U=t.a,A=n.mul(t.b,Fn);let I=n.mul(y,$),z=n.mul(x,k),S=n.mul(v,E),C=n.add(y,x),L=n.add($,k);C=n.mul(C,L),L=n.add(I,z),C=n.sub(C,L),L=n.add(y,v);let G=n.add($,E);return L=n.mul(L,G),G=n.add(I,S),L=n.sub(L,G),G=n.add(x,v),N=n.add(k,E),G=n.mul(G,N),N=n.add(z,S),G=n.sub(G,N),F=n.mul(U,L),N=n.mul(A,S),F=n.add(N,F),N=n.sub(z,F),F=n.add(z,F),R=n.mul(N,F),z=n.add(I,I),z=n.add(z,I),S=n.mul(U,S),L=n.mul(A,L),z=n.add(z,S),S=n.sub(I,S),S=n.mul(U,S),L=n.add(L,S),I=n.mul(z,L),R=n.add(R,I),I=n.mul(G,L),N=n.mul(C,N),N=n.sub(N,I),I=n.mul(C,z),F=n.mul(G,F),F=n.add(F,I),new p(N,R,F)}subtract(h){return this.add(h.negate())}is0(){return this.equals(p.ZERO)}wNAF(h){return B.wNAFCached(this,h,p.normalizeZ)}multiplyUnsafe(h){const{endo:y,n:x}=t;et("scalar",h,Pe,x);const v=p.ZERO;if(h===Pe)return v;if(this.is0()||h===j)return this;if(!y||B.hasPrecomputes(this))return B.wNAFCachedUnsafe(this,h,p.normalizeZ);let{k1neg:$,k1:k,k2neg:E,k2:N}=y.splitScalar(h),R=v,F=v,U=this;for(;k>Pe||N>Pe;)k&j&&(R=R.add(U)),N&j&&(F=F.add(U)),U=U.double(),k>>=j,N>>=j;return $&&(R=R.negate()),E&&(F=F.negate()),F=new p(n.mul(F.px,y.beta),F.py,F.pz),R.add(F)}multiply(h){const{endo:y,n:x}=t;et("scalar",h,j,x);let v,$;if(y){const{k1neg:k,k1:E,k2neg:N,k2:R}=y.splitScalar(h);let{p:F,f:U}=this.wNAF(E),{p:A,f:I}=this.wNAF(R);F=B.constTimeNegate(k,F),A=B.constTimeNegate(N,A),A=new p(n.mul(A.px,y.beta),A.py,A.pz),v=F.add(A),$=U.add(I)}else{const{p:k,f:E}=this.wNAF(h);v=k,$=E}return p.normalizeZ([v,$])[0]}multiplyAndAddUnsafe(h,y,x){const v=p.BASE,$=(E,N)=>N===Pe||N===j||!E.equals(v)?E.multiplyUnsafe(N):E.multiply(N),k=$(this,y).add($(h,x));return k.is0()?void 0:k}toAffine(h){return b(this,h)}isTorsionFree(){const{h,isTorsionFree:y}=t;if(h===j)return!0;if(y)return y(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h,clearCofactor:y}=t;return h===j?this:y?y(p,this):this.multiplyUnsafe(t.h)}toRawBytes(h=!0){return yt("isCompressed",h),this.assertValidity(),s(p,this,h)}toHex(h=!0){return yt("isCompressed",h),gt(this.toRawBytes(h))}}p.BASE=new p(t.Gx,t.Gy,n.ONE),p.ZERO=new p(n.ZERO,n.ONE,n.ZERO);const{endo:g,nBitLength:P}=t,B=ed(p,g?Math.ceil(P/2):P);return{CURVE:t,ProjectivePoint:p,normPrivateKeyToScalar:d,weierstrassEquation:i,isWithinCurveOrder:f}}function id(e){const t=Ui(e);return tn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function ad(e){const t=id(e),{Fp:n,n:r,nByteLength:s,nBitLength:o}=t,i=n.BYTES+1,c=2*n.BYTES+1;function a(A){return K(A,r)}function u(A){return Yn(A,r)}const{ProjectivePoint:f,normPrivateKeyToScalar:d,weierstrassEquation:l,isWithinCurveOrder:b}=od({...t,toBytes(A,I,z){const S=I.toAffine(),C=n.toBytes(S.x),L=Gt;return yt("isCompressed",z),z?L(Uint8Array.from([I.hasEvenY()?2:3]),C):L(Uint8Array.from([4]),C,n.toBytes(S.y))},fromBytes(A){const I=A.length,z=A[0],S=A.subarray(1);if(I===i&&(z===2||z===3)){const C=Le(S);if(!Br(C,j,n.ORDER))throw new Error("Point is not on curve");const L=l(C);let G;try{G=n.sqrt(L)}catch(W){const V=W instanceof Error?": "+W.message:"";throw new Error("Point is not on curve"+V)}const H=(G&j)===j;return(z&1)===1!==H&&(G=n.neg(G)),{x:C,y:G}}else if(I===c&&z===4){const C=n.fromBytes(S.subarray(0,n.BYTES)),L=n.fromBytes(S.subarray(n.BYTES,2*n.BYTES));return{x:C,y:L}}else{const C=i,L=c;throw new Error("invalid Point, expected length of "+C+", or uncompressed "+L+", got "+I)}}});function m(A){const I=r>>j;return A>I}function p(A){return m(A)?a(-A):A}const g=(A,I,z)=>Le(A.slice(I,z));class P{constructor(I,z,S){et("r",I,j,r),et("s",z,j,r),this.r=I,this.s=z,S!=null&&(this.recovery=S),Object.freeze(this)}static fromCompact(I){const z=s;return I=ne("compactSignature",I,z*2),new P(g(I,0,z),g(I,z,2*z))}static fromDER(I){const{r:z,s:S}=ve.toSig(ne("DER",I));return new P(z,S)}assertValidity(){}addRecoveryBit(I){return new P(this.r,this.s,I)}recoverPublicKey(I){const{r:z,s:S,recovery:C}=this,L=v(ne("msgHash",I));if(C==null||![0,1,2,3].includes(C))throw new Error("recovery id invalid");const G=C===2||C===3?z+t.n:z;if(G>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const H=(C&1)===0?"02":"03",oe=f.fromHex(H+kn(G,n.BYTES)),W=u(G),V=a(-L*W),Ze=a(S*W),Ne=f.BASE.multiplyAndAddUnsafe(oe,V,Ze);if(!Ne)throw new Error("point at infinify");return Ne.assertValidity(),Ne}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new P(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Mt(this.toDERHex())}toDERHex(){return ve.hexFromSig(this)}toCompactRawBytes(){return Mt(this.toCompactHex())}toCompactHex(){const I=s;return kn(this.r,I)+kn(this.s,I)}}const B={isValidPrivateKey(A){try{return d(A),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const A=_i(t.n);return Jf(t.randomBytes(A),t.n)},precompute(A=8,I=f.BASE){return I._setWindowSize(A),I.multiply(BigInt(3)),I}};function w(A,I=!0){return f.fromPrivateKey(A).toRawBytes(I)}function h(A){if(typeof A=="bigint")return!1;if(A instanceof f)return!0;const z=ne("key",A).length,S=n.BYTES,C=S+1,L=2*S+1;if(!(t.allowedPrivateKeyLengths||s===C))return z===C||z===L}function y(A,I,z=!0){if(h(A)===!0)throw new Error("first arg must be private key");if(h(I)===!1)throw new Error("second arg must be public key");return f.fromHex(I).multiply(d(A)).toRawBytes(z)}const x=t.bits2int||function(A){if(A.length>8192)throw new Error("input is too large");const I=Le(A),z=A.length*8-o;return z>0?I>>BigInt(z):I},v=t.bits2int_modN||function(A){return a(x(A))},$=en(o);function k(A){return et("num < 2^"+o,A,Pe,$),St(A,s)}function E(A,I,z=N){if(["recovered","canonical"].some(ze=>ze in z))throw new Error("sign() legacy options not supported");const{hash:S,randomBytes:C}=t;let{lowS:L,prehash:G,extraEntropy:H}=z;L==null&&(L=!0),A=ne("msgHash",A),Ls(z),G&&(A=ne("prehashed msgHash",S(A)));const oe=v(A),W=d(I),V=[k(W),k(oe)];if(H!=null&&H!==!1){const ze=H===!0?C(n.BYTES):H;V.push(ne("extraEntropy",ze))}const Ze=Gt(...V),Ne=oe;function bn(ze){const We=x(ze);if(!b(We))return;const hn=u(We),ut=f.BASE.multiply(We).toAffine(),_e=a(ut.x);if(_e===Pe)return;const ft=a(hn*a(Ne+_e*W));if(ft===Pe)return;let Ke=(ut.x===_e?0:2)|Number(ut.y&j),Dr=ft;return L&&m(ft)&&(Dr=p(ft),Ke^=1),new P(_e,Dr,Ke)}return{seed:Ze,k2sig:bn}}const N={lowS:t.lowS,prehash:!1},R={lowS:t.lowS,prehash:!1};function F(A,I,z=N){const{seed:S,k2sig:C}=E(A,I,z),L=t;return Bc(L.hash.outputLen,L.nByteLength,L.hmac)(S,C)}f.BASE._setWindowSize(8);function U(A,I,z,S=R){const C=A;I=ne("msgHash",I),z=ne("publicKey",z);const{lowS:L,prehash:G,format:H}=S;if(Ls(S),"strict"in S)throw new Error("options.strict was renamed to lowS");if(H!==void 0&&H!=="compact"&&H!=="der")throw new Error("format must be compact or der");const oe=typeof C=="string"||$t(C),W=!oe&&!H&&typeof C=="object"&&C!==null&&typeof C.r=="bigint"&&typeof C.s=="bigint";if(!oe&&!W)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let V,Ze;try{if(W&&(V=new P(C.r,C.s)),oe){try{H!=="compact"&&(V=P.fromDER(C))}catch(Ke){if(!(Ke instanceof ve.Err))throw Ke}!V&&H!=="der"&&(V=P.fromCompact(C))}Ze=f.fromHex(z)}catch{return!1}if(!V||L&&V.hasHighS())return!1;G&&(I=t.hash(I));const{r:Ne,s:bn}=V,ze=v(I),We=u(bn),hn=a(ze*We),ut=a(Ne*We),_e=f.BASE.multiplyAndAddUnsafe(Ze,hn,ut)?.toAffine();return _e?a(_e.x)===Ne:!1}return{CURVE:t,getPublicKey:w,getSharedSecret:y,sign:F,verify:U,ProjectivePoint:f,Signature:P,utils:B}}function cd(e){return{hash:e,hmac:(t,...n)=>Si(e,t,$a(...n)),randomBytes:Aa}}function ud(e,t){const n=r=>ad({...e,...cd(r)});return{...n(t),create:n}}const Mi=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Us=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),fd=BigInt(0),dd=BigInt(1),Xn=BigInt(2),Ms=(e,t)=>(e+t/Xn)/t;function ld(e){const t=Mi,n=BigInt(3),r=BigInt(6),s=BigInt(11),o=BigInt(22),i=BigInt(23),c=BigInt(44),a=BigInt(88),u=e*e*e%t,f=u*u*e%t,d=te(f,n,t)*f%t,l=te(d,n,t)*f%t,b=te(l,Xn,t)*u%t,m=te(b,s,t)*b%t,p=te(m,o,t)*m%t,g=te(p,c,t)*p%t,P=te(g,a,t)*g%t,B=te(P,c,t)*p%t,w=te(B,n,t)*f%t,h=te(w,i,t)*m%t,y=te(h,r,t)*u%t,x=te(y,Xn,t);if(!Qn.eql(Qn.sqr(x),e))throw new Error("Cannot find square root");return x}const Qn=Ur(Mi,void 0,void 0,{sqrt:ld}),Mr=ud({a:fd,b:BigInt(7),Fp:Qn,n:Us,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Us,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-dd*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,i=BigInt("0x100000000000000000000000000000000"),c=Ms(o*e,t),a=Ms(-r*e,t);let u=K(e-c*n-a*s,t),f=K(-c*r-a*o,t);const d=u>i,l=f>i;if(d&&(u=t-u),l&&(f=t-f),u>i||f>i)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:l,k2:f}}}},zo),bd=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:Mr},Symbol.toStringTag,{value:"Module"}));function Gi(e,t={}){const{recovered:n}=t;if(typeof e.r>"u")throw new Cn({signature:e});if(typeof e.s>"u")throw new Cn({signature:e});if(n&&typeof e.yParity>"u")throw new Cn({signature:e});if(e.r<0n||e.r>Fs)throw new xd({value:e.r});if(e.s<0n||e.s>Fs)throw new vd({value:e.s});if(typeof e.yParity=="number"&&e.yParity!==0&&e.yParity!==1)throw new Hr({value:e.yParity})}function hd(e){return Hi(fe(e))}function Hi(e){if(e.length!==130&&e.length!==132)throw new wd({signature:e});const t=BigInt(ye(e,0,32)),n=BigInt(ye(e,32,64)),r=(()=>{const s=+`0x${e.slice(130)}`;if(!Number.isNaN(s))try{return Gr(s)}catch{throw new Hr({value:s})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function pd(e){if(!(typeof e.r>"u")&&!(typeof e.s>"u"))return md(e)}function md(e){const t=typeof e=="string"?Hi(e):e instanceof Uint8Array?hd(e):typeof e.r=="string"?gd(e):e.v?yd(e):{r:e.r,s:e.s,...typeof e.yParity<"u"?{yParity:e.yParity}:{}};return Gi(t),t}function yd(e){return{r:e.r,s:e.s,yParity:Gr(e.v)}}function gd(e){const t=(()=>{const n=e.v?Number(e.v):void 0;let r=e.yParity?Number(e.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=Gr(n)),typeof r!="number")throw new Hr({value:e.yParity});return r})();return{r:BigInt(e.r),s:BigInt(e.s),yParity:t}}function Gr(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new Pd({value:e})}class wd extends M{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${ee(Kc(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class Cn extends M{constructor({signature:t}){super(`Signature \`${Qo(t)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class xd extends M{constructor({value:t}){super(`Value \`${t}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class vd extends M{constructor({value:t}){super(`Value \`${t}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class Hr extends M{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class Pd extends M{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function Ed(e,t={}){return typeof e.chainId=="string"?Bd(e):{...e,...t.signature}}function Bd(e){const{address:t,chainId:n,nonce:r}=e,s=pd(e);return{address:t,chainId:Number(n),nonce:BigInt(r),...s}}const Id="0x8010801080108010801080108010801080108010801080108010801080108010",Ad=Bi("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function ji(e){if(typeof e=="string"){if(ye(e,-32)!==Id)throw new Td(e)}else Gi(e.authorization)}function $d(e){ji(e);const t=si(ye(e,-64,-32)),n=ye(e,-t-64,-64),r=ye(e,0,-t-64),[s,o,i]=Uf(Ad,n);return{authorization:Ed({address:s.delegation,chainId:Number(s.chainId),nonce:s.nonce,yParity:s.yParity,r:s.r,s:s.s}),signature:r,...i&&i!=="0x"?{data:i,to:o}:{}}}function Sd(e){try{return ji(e),!0}catch{return!1}}let Td=class extends M{constructor(t){super(`Value \`${t}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};function Sl(e){const{address:t,data:n,signature:r,to:s="hex"}=e,o=le([vt([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,n,r]),lf]);return s==="hex"?o:Ae(o)}function Nd(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function kd(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?re(e.nonce):void 0,storageProof:e.storageProof?Nd(e.storageProof):void 0}}async function Fd(e,{address:t,blockNumber:n,blockTag:r,storageKeys:s}){const o=r??"latest",i=n!==void 0?T(n):void 0,c=await e.request({method:"eth_getProof",params:[t,s,i||o]});return kd(c)}async function Cd(e,{address:t,blockNumber:n,blockTag:r="latest",slot:s}){const o=n!==void 0?T(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,s,o||r]})}async function jr(e,{blockHash:t,blockNumber:n,blockTag:r,hash:s,index:o,sender:i,nonce:c}){const a=r||"latest",u=n!==void 0?T(n):void 0;let f=null;if(s?f=await e.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):t?f=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,T(o)]},{dedupe:!0}):typeof o=="number"?f=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[u||a,T(o)]},{dedupe:!!u}):i&&typeof c=="number"&&(f=await e.request({method:"eth_getTransactionBySenderAndNonce",params:[i,T(c)]},{dedupe:!0})),!f)throw new Po({blockHash:t,blockNumber:n,blockTag:a,hash:s,index:o});return(e.chain?.formatters?.transaction?.format||Xt)(f,"getTransaction")}async function Rd(e,{hash:t,transactionReceipt:n}){const[r,s]=await Promise.all([_(e,Nt,"getBlockNumber")({}),t?_(e,jr,"getTransaction")({hash:t}):void 0]),o=n?.blockNumber||s?.blockNumber;return o?r-o+1n:0n}async function Rt(e,{hash:t}){const n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new Eo({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||Sr)(n,"getTransactionReceipt")}async function zd(e,t){const{account:n,authorizationList:r,allowFailure:s=!0,blockNumber:o,blockOverrides:i,blockTag:c,stateOverride:a}=t,u=t.contracts,{batchSize:f=t.batchSize??1024,deployless:d=t.deployless??!1}=typeof e.batch?.multicall=="object"?e.batch.multicall:{},l=(()=>{if(t.multicallAddress)return t.multicallAddress;if(d)return null;if(e.chain)return at({blockNumber:o,chain:e.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),b=[[]];let m=0,p=0;for(let B=0;B<u.length;B++){const{abi:w,address:h,args:y,functionName:x}=u[B];try{const v=be({abi:w,args:y,functionName:x});p+=(v.length-2)/2,f>0&&p>f&&b[m].length>0&&(m++,p=(v.length-2)/2,b[m]=[]),b[m]=[...b[m],{allowFailure:!0,callData:v,target:h}]}catch(v){const $=rt(v,{abi:w,address:h,args:y,docsPath:"/docs/contract/multicall",functionName:x,sender:n});if(!s)throw $;b[m]=[...b[m],{allowFailure:!0,callData:"0x",target:h}]}}const g=await Promise.allSettled(b.map(B=>_(e,de,"readContract")({...l===null?{code:Ar}:{address:l},abi:_t,account:n,args:[B],authorizationList:r,blockNumber:o,blockOverrides:i,blockTag:c,functionName:"aggregate3",stateOverride:a}))),P=[];for(let B=0;B<g.length;B++){const w=g[B];if(w.status==="rejected"){if(!s)throw w.reason;for(let y=0;y<b[B].length;y++)P.push({status:"failure",error:w.reason,result:void 0});continue}const h=w.value;for(let y=0;y<h.length;y++){const{returnData:x,success:v}=h[y],{callData:$}=b[B][y],{abi:k,address:E,functionName:N,args:R}=u[P.length];try{if($==="0x")throw new Pt;if(!v)throw new Wt({data:x});const F=qe({abi:k,args:R,data:x,functionName:N});P.push(s?{result:F,status:"success"}:F)}catch(F){const U=rt(F,{abi:k,address:E,args:R,docsPath:"/docs/contract/multicall",functionName:N});if(!s)throw U;P.push({error:U,result:void 0,status:"failure"})}}}if(P.length!==u.length)throw new O("multicall results mismatch");return P}async function er(e,t){const{blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",blocks:s,returnFullTransactions:o,traceTransfers:i,validation:c}=t;try{const a=[];for(const l of s){const b=l.blockOverrides?ai(l.blockOverrides):void 0,m=l.calls.map(g=>{const P=g,B=P.account?Q(P.account):void 0,w=P.abi?be(P):P.data,h={...P,account:B,data:P.dataSuffix?oo([w||"0x",P.dataSuffix]):w,from:P.from??B?.address};return it(h),At(h)}),p=l.stateOverrides?fr(l.stateOverrides):void 0;a.push({blockOverrides:b,calls:m,stateOverrides:p})}const f=(typeof n=="bigint"?T(n):void 0)||r;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:a,returnFullTransactions:o,traceTransfers:i,validation:c},f]})).map((l,b)=>({...lr(l),calls:l.calls.map((m,p)=>{const{abi:g,args:P,functionName:B,to:w}=s[b].calls[p],h=m.error?.data??m.returnData,y=BigInt(m.gasUsed),x=m.logs?.map(E=>Se(E)),v=m.status==="0x1"?"success":"failure",$=g&&v==="success"&&h!=="0x"?qe({abi:g,data:h,functionName:B}):null,k=(()=>{if(v==="success")return;let E;if(m.error?.data==="0x"?E=new Pt:m.error&&(E=new Wt(m.error)),!!E)return rt(E,{abi:g??[],address:w??"0x",args:P,functionName:B??"<unknown>"})})();return{data:h,gasUsed:y,logs:x,status:v,...v==="success"?{result:$}:{error:k}}})}))}catch(a){const u=a,f=Kt(u,{});throw f instanceof xt?u:f}}function tr(e){let t=!0,n="",r=0,s="",o=!1;for(let i=0;i<e.length;i++){const c=e[i];if(["(",")",","].includes(c)&&(t=!0),c==="("&&r++,c===")"&&r--,!!t){if(r===0){if(c===" "&&["event","function","error",""].includes(s))s="";else if(s+=c,c===")"){o=!0;break}continue}if(c===" "){e[i-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=c,n+=c}}if(!o)throw new M("Unable to normalize signature.");return s}function nr(e,t){const n=typeof e,r=t.type;switch(r){case"address":return Zn(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,o)=>nr(Object.values(e)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>nr(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Di(e,t,n){for(const r in e){const s=e[r],o=t[r];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return Di(s.components,o.components,n[r]);const i=[s.type,o.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?Zn(n[r],{strict:!1}):i.includes("address")&&i.includes("bytes")?Zn(n[r],{strict:!1}):!1)return i}}function Vi(e,t={}){const{prepare:n=!0}=t,r=Array.isArray(e)||typeof e=="string"?us(e):e;return{...r,...n?{hash:Xe(r)}:{}}}function dn(e,t,n){const{args:r=[],prepare:s=!0}=n??{},o=Yc(t,{strict:!1}),i=e.filter(u=>o?u.type==="function"||u.type==="error"?qi(u)===ye(t,0,4):u.type==="event"?Xe(u)===t:!1:"name"in u&&u.name===t);if(i.length===0)throw new Ht({name:t});if(i.length===1)return{...i[0],...s?{hash:Xe(i[0])}:{}};let c;for(const u of i){if(!("inputs"in u))continue;if(!r||r.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...s?{hash:Xe(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==r.length)continue;if(r.every((d,l)=>{const b="inputs"in u&&u.inputs[l];return b?nr(d,b):!1})){if(c&&"inputs"in c&&c.inputs){const d=Di(u.inputs,c.inputs,r);if(d)throw new Od({abiItem:u,type:d[0]},{abiItem:c,type:d[1]})}c=u}}const a=(()=>{if(c)return c;const[u,...f]=i;return{...u,overloads:f}})();if(!a)throw new Ht({name:t});return{...a,...s?{hash:Xe(a)}:{}}}function qi(...e){const t=(()=>{if(Array.isArray(e[0])){const[n,r]=e;return dn(n,r)}return e[0]})();return ye(Xe(t),0,4)}function _d(...e){const t=(()=>{if(Array.isArray(e[0])){const[r,s]=e;return dn(r,s)}return e[0]})(),n=typeof t=="string"?t:_n(t);return tr(n)}function Xe(...e){const t=(()=>{if(Array.isArray(e[0])){const[n,r]=e;return dn(n,r)}return e[0]})();return typeof t!="string"&&"hash"in t&&t.hash?t.hash:vi(Ir(_d(t)))}class Od extends M{constructor(t,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${t.type}\` in \`${tr(_n(t.abiItem))}\`, and`,`\`${n.type}\` in \`${tr(_n(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class Ht extends M{constructor({name:t,data:n,type:r="item"}){const s=t?` with name "${t}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}function Ld(...e){const[t,n]=(()=>{if(Array.isArray(e[0])){const[o,i]=e;return[Md(o),i]}return e})(),{bytecode:r,args:s}=n;return ue(r,t.inputs?.length&&s?.length?Or(t.inputs,s):"0x")}function Ud(e){return Vi(e)}function Md(e){const t=e.find(n=>n.type==="constructor");if(!t)throw new Ht({name:"constructor"});return t}function Gd(...e){const[t,n=[]]=(()=>{if(Array.isArray(e[0])){const[u,f,d]=e;return[Gs(u,f,{args:d}),d]}const[c,a]=e;return[c,a]})(),{overloads:r}=t,s=r?Gs([t,...r],t.name,{args:n}):t,o=Hd(s),i=n.length>0?Or(s.inputs,n):void 0;return i?ue(o,i):o}function Ye(e,t={}){return Vi(e,t)}function Gs(e,t,n){const r=dn(e,t,n);if(r.type!=="function")throw new Ht({name:t,type:"function"});return r}function Hd(e){return qi(e)}const jd="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",pe="0x0000000000000000000000000000000000000000",Dd="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function Vd(e,t){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:o,traceAssetChanges:i,traceTransfers:c,validation:a}=t,u=t.account?Q(t.account):void 0;if(i&&!u)throw new O("`account` is required when `traceAssetChanges` is true");const f=u?Ld(Ud("constructor(bytes, bytes)"),{bytecode:ci,args:[Dd,Gd(Ye("function getBalance(address)"),[u.address])]}):void 0,d=i?await Promise.all(t.calls.map(async S=>{if(!S.data&&!S.abi)return;const{accessList:C}=await yi(e,{account:u.address,...S,data:S.abi?be(S):S.data});return C.map(({address:L,storageKeys:G})=>G.length>0?L:null)})).then(S=>S.flat().filter(Boolean)):[],l=await er(e,{blockNumber:n,blockTag:r,blocks:[...i?[{calls:[{data:f}],stateOverrides:o},{calls:d.map((S,C)=>({abi:[Ye("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:S,from:pe,nonce:C})),stateOverrides:[{address:pe,nonce:0}]}]:[],{calls:[...s,{}].map(S=>({...S,from:u?.address})),stateOverrides:o},...i?[{calls:[{data:f}]},{calls:d.map((S,C)=>({abi:[Ye("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:S,from:pe,nonce:C})),stateOverrides:[{address:pe,nonce:0}]},{calls:d.map((S,C)=>({to:S,abi:[Ye("function decimals() returns (uint256)")],functionName:"decimals",from:pe,nonce:C})),stateOverrides:[{address:pe,nonce:0}]},{calls:d.map((S,C)=>({to:S,abi:[Ye("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:pe,nonce:C})),stateOverrides:[{address:pe,nonce:0}]},{calls:d.map((S,C)=>({to:S,abi:[Ye("function symbol() returns (string)")],functionName:"symbol",from:pe,nonce:C})),stateOverrides:[{address:pe,nonce:0}]}]:[]],traceTransfers:c,validation:a}),b=i?l[2]:l[0],[m,p,,g,P,B,w,h]=i?l:[],{calls:y,...x}=b,v=y.slice(0,-1)??[],$=m?.calls??[],k=p?.calls??[],E=[...$,...k].map(S=>S.status==="success"?ae(S.data):null),N=g?.calls??[],R=P?.calls??[],F=[...N,...R].map(S=>S.status==="success"?ae(S.data):null),U=(B?.calls??[]).map(S=>S.status==="success"?S.result:null),A=(h?.calls??[]).map(S=>S.status==="success"?S.result:null),I=(w?.calls??[]).map(S=>S.status==="success"?S.result:null),z=[];for(const[S,C]of F.entries()){const L=E[S];if(typeof C!="bigint"||typeof L!="bigint")continue;const G=U[S-1],H=A[S-1],oe=I[S-1],W=S===0?{address:jd,decimals:18,symbol:"ETH"}:{address:d[S-1],decimals:oe||G?Number(G??1):void 0,symbol:H??void 0};z.some(V=>V.token.address===W.address)||z.push({token:W,value:{pre:L,post:C,diff:C-L}})}return{assetChanges:z,block:x,results:v}}const Zi="0x6492649264926492649264926492649264926492649264926492649264926492";function qd(e){if(ye(e,-32)!==Zi)throw new Kd(e)}function Zd(e){const{data:t,signature:n,to:r}=e;return ue(Or(Bi("address, bytes, bytes"),[r,t,n]),Zi)}function Wd(e){try{return qd(e),!0}catch{return!1}}class Kd extends M{constructor(t){super(`Value \`${t}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}function Yd({r:e,s:t,to:n="hex",v:r,yParity:s}){const o=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),i=`0x${new Mr.Signature(ae(e),ae(t)).toCompactHex()}${o===0?"1b":"1c"}`;return n==="hex"?i:Ae(i)}async function ln(e,t){const{address:n,hash:r,erc6492VerifierAddress:s=t.universalSignatureVerifierAddress??e.chain?.contracts?.erc6492Verifier?.address,multicallAddress:o=t.multicallAddress??e.chain?.contracts?.multicall3?.address}=t,i=(()=>{const c=t.signature;return bt(c)?c:typeof c=="object"&&"r"in c&&"s"in c?Yd(c):D(c)})();try{return Sd(i)?await Jd(e,{...t,multicallAddress:o,signature:i}):await Xd(e,{...t,verifierAddress:s,signature:i})}catch(c){try{if(Qt(io(n),await Ao({hash:r,signature:i})))return!0}catch{}if(c instanceof De)return!1;throw c}}async function Jd(e,t){const{address:n,blockNumber:r,blockTag:s,hash:o,multicallAddress:i}=t,{authorization:c,data:a,signature:u,to:f}=$d(t.signature);if(await qn(e,{address:n,blockNumber:r,blockTag:s})===le(["0xef0100",c.address]))return await Qd(e,{address:n,blockNumber:r,blockTag:s,hash:o,signature:u});const l={address:c.address,chainId:Number(c.chainId),nonce:Number(c.nonce),r:T(c.r,{size:32}),s:T(c.s,{size:32}),yParity:c.yParity};if(!await df({address:n,authorization:l}))throw new De;const m=await _(e,de,"readContract")({...i?{address:i}:{code:Ar},authorizationList:[l],abi:_t,blockNumber:r,blockTag:"pending",functionName:"aggregate3",args:[[...a?[{allowFailure:!0,target:f??n,callData:a}]:[],{allowFailure:!0,target:n,callData:be({abi:qs,functionName:"isValidSignature",args:[o,u]})}]]});if(m[m.length-1]?.returnData?.startsWith("0x1626ba7e"))return!0;throw new De}async function Xd(e,t){const{address:n,factory:r,factoryData:s,hash:o,signature:i,verifierAddress:c,...a}=t,u=await(async()=>!r&&!s||Wd(i)?i:Zd({data:s,signature:i,to:r}))(),f=c?{to:c,data:be({abi:rs,functionName:"isValidSig",args:[n,o,u]}),...a}:{data:$r({abi:rs,args:[n,o,u],bytecode:nu}),...a},{data:d}=await _(e,sn,"call")(f).catch(l=>{throw l instanceof Bo?new De:l});if(ia(d??"0x0"))return!0;throw new De}async function Qd(e,t){const{address:n,blockNumber:r,blockTag:s,hash:o,signature:i}=t;if((await _(e,de,"readContract")({address:n,abi:qs,args:[o,i],blockNumber:r,blockTag:s,functionName:"isValidSignature"}).catch(a=>{throw a instanceof Io?new De:a})).startsWith("0x1626ba7e"))return!0;throw new De}class De extends Error{}async function el(e,{address:t,message:n,factory:r,factoryData:s,signature:o,...i}){const c=ao(n);return _(e,ln,"verifyHash")({address:t,factory:r,factoryData:s,hash:c,signature:o,...i})}async function tl(e,t){const{address:n,factory:r,factoryData:s,signature:o,message:i,primaryType:c,types:a,domain:u,...f}=t,d=Sa({message:i,primaryType:c,types:a,domain:u});return _(e,ln,"verifyHash")({address:n,factory:r,factoryData:s,hash:d,signature:o,...f})}function Wi(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:o,pollingInterval:i=e.pollingInterval}){const c=typeof o<"u"?o:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc"));let a;return c?(()=>{const d=ge(["watchBlockNumber",e.uid,t,n,i]);return Te(d,{onBlockNumber:r,onError:s},l=>ct(async()=>{try{const b=await _(e,Nt,"getBlockNumber")({cacheTime:0});if(a!==void 0){if(b===a)return;if(b-a>1&&n)for(let m=a+1n;m<b;m++)l.onBlockNumber(m,a),a=m}(a===void 0||b>a)&&(l.onBlockNumber(b,a),a=b)}catch(b){l.onError?.(b)}},{emitOnBegin:t,interval:i}))})():(()=>{const d=ge(["watchBlockNumber",e.uid,t,n]);return Te(d,{onBlockNumber:r,onError:s},l=>{let b=!0,m=()=>b=!1;return(async()=>{try{const p=(()=>{if(e.transport.type==="fallback"){const P=e.transport.transports.find(B=>B.config.type==="webSocket"||B.config.type==="ipc");return P?P.value:e.transport}return e.transport})(),{unsubscribe:g}=await p.subscribe({params:["newHeads"],onData(P){if(!b)return;const B=ae(P.result?.number);l.onBlockNumber(B,a),a=B},onError(P){l.onError?.(P)}});m=g,b||m()}catch(p){s?.(p)}})(),()=>m()})})()}async function nl(e,t){const{checkReplacement:n=!0,confirmations:r=1,hash:s,onReplaced:o,retryCount:i=6,retryDelay:c=({count:y})=>~~(1<<y)*200,timeout:a=18e4}=t,u=ge(["waitForTransactionReceipt",e.uid,s]),f=t.pollingInterval?t.pollingInterval:e.chain?.experimental_preconfirmationTime?e.chain.experimental_preconfirmationTime:e.pollingInterval;let d,l,b,m=!1,p,g;const{promise:P,resolve:B,reject:w}=Ds(),h=a?setTimeout(()=>{g?.(),p?.(),w(new M0({hash:s}))},a):void 0;return p=Te(u,{onReplaced:o,resolve:B,reject:w},async y=>{if(b=await _(e,Rt,"getTransactionReceipt")({hash:s}).catch(()=>{}),b&&r<=1){clearTimeout(h),y.resolve(b),p?.();return}g=_(e,Wi,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:f,async onBlockNumber(x){const v=k=>{clearTimeout(h),g?.(),k(),p?.()};let $=x;if(!m)try{if(b){if(r>1&&(!b.blockNumber||$-b.blockNumber+1n<r))return;v(()=>y.resolve(b));return}if(n&&!d&&(m=!0,await Rn(async()=>{d=await _(e,jr,"getTransaction")({hash:s}),d.blockNumber&&($=d.blockNumber)},{delay:c,retryCount:i}),m=!1),b=await _(e,Rt,"getTransactionReceipt")({hash:s}),r>1&&(!b.blockNumber||$-b.blockNumber+1n<r))return;v(()=>y.resolve(b))}catch(k){if(k instanceof Po||k instanceof Eo){if(!d){m=!1;return}try{l=d,m=!0;const E=await Rn(()=>_(e,ie,"getBlock")({blockNumber:$,includeTransactions:!0}),{delay:c,retryCount:i,shouldRetry:({error:F})=>F instanceof ko});m=!1;const N=E.transactions.find(({from:F,nonce:U})=>F===l.from&&U===l.nonce);if(!N||(b=await _(e,Rt,"getTransactionReceipt")({hash:N.hash}),r>1&&(!b.blockNumber||$-b.blockNumber+1n<r)))return;let R="replaced";N.to===l.to&&N.value===l.value&&N.input===l.input?R="repriced":N.from===N.to&&N.value===0n&&(R="cancelled"),v(()=>{y.onReplaced?.({reason:R,replacedTransaction:l,transaction:N,transactionReceipt:b}),y.resolve(b)})}catch(E){v(()=>y.reject(E))}}else v(()=>y.reject(k))}}})}),P}function rl(e,{blockTag:t=e.experimental_blockTag??"latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:o,includeTransactions:i,poll:c,pollingInterval:a=e.pollingInterval}){const u=typeof c<"u"?c:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),f=i??!1;let d;return u?(()=>{const m=ge(["watchBlocks",e.uid,t,n,r,f,a]);return Te(m,{onBlock:s,onError:o},p=>ct(async()=>{try{const g=await _(e,ie,"getBlock")({blockTag:t,includeTransactions:f});if(g.number!==null&&d?.number!=null){if(g.number===d.number)return;if(g.number-d.number>1&&n)for(let P=d?.number+1n;P<g.number;P++){const B=await _(e,ie,"getBlock")({blockNumber:P,includeTransactions:f});p.onBlock(B,d),d=B}}(d?.number==null||t==="pending"&&g?.number==null||g.number!==null&&g.number>d.number)&&(p.onBlock(g,d),d=g)}catch(g){p.onError?.(g)}},{emitOnBegin:r,interval:a}))})():(()=>{let m=!0,p=!0,g=()=>m=!1;return(async()=>{try{r&&_(e,ie,"getBlock")({blockTag:t,includeTransactions:f}).then(w=>{m&&p&&(s(w,void 0),p=!1)}).catch(o);const P=(()=>{if(e.transport.type==="fallback"){const w=e.transport.transports.find(h=>h.config.type==="webSocket"||h.config.type==="ipc");return w?w.value:e.transport}return e.transport})(),{unsubscribe:B}=await P.subscribe({params:["newHeads"],async onData(w){if(!m)return;const h=await _(e,ie,"getBlock")({blockNumber:w.result?.number,includeTransactions:f}).catch(()=>{});m&&(s(h,d),p=!1,d=h)},onError(w){o?.(w)}});g=B,m||g()}catch(P){o?.(P)}})(),()=>g()})()}function sl(e,{address:t,args:n,batch:r=!0,event:s,events:o,fromBlock:i,onError:c,onLogs:a,poll:u,pollingInterval:f=e.pollingInterval,strict:d}){const l=typeof u<"u"?u:typeof i=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),b=d??!1;return l?(()=>{const g=ge(["watchEvent",t,n,r,e.uid,s,f,i]);return Te(g,{onLogs:a,onError:c},P=>{let B;i!==void 0&&(B=i-1n);let w,h=!1;const y=ct(async()=>{if(!h){try{w=await _(e,gi,"createEventFilter")({address:t,args:n,event:s,events:o,strict:b,fromBlock:i})}catch{}h=!0;return}try{let x;if(w)x=await _(e,on,"getFilterChanges")({filter:w});else{const v=await _(e,Nt,"getBlockNumber")({});B&&B!==v?x=await _(e,vr,"getLogs")({address:t,args:n,event:s,events:o,fromBlock:B+1n,toBlock:v}):x=[],B=v}if(x.length===0)return;if(r)P.onLogs(x);else for(const v of x)P.onLogs([v])}catch(x){w&&x instanceof rr&&(h=!1),P.onError?.(x)}},{emitOnBegin:!0,interval:f});return async()=>{w&&await _(e,an,"uninstallFilter")({filter:w}),y()}})})():(()=>{let g=!0,P=()=>g=!1;return(async()=>{try{const B=(()=>{if(e.transport.type==="fallback"){const x=e.transport.transports.find(v=>v.config.type==="webSocket"||v.config.type==="ipc");return x?x.value:e.transport}return e.transport})(),w=o??(s?[s]:void 0);let h=[];w&&(h=[w.flatMap(v=>Et({abi:[v],eventName:v.name,args:n}))],s&&(h=h[0]));const{unsubscribe:y}=await B.subscribe({params:["logs",{address:t,topics:h}],onData(x){if(!g)return;const v=x.result;try{const{eventName:$,args:k}=wr({abi:w??[],data:v.data,topics:v.topics,strict:b}),E=Se(v,{args:k,eventName:$});a([E])}catch($){let k,E;if($ instanceof pt||$ instanceof Vt){if(d)return;k=$.abiItem.name,E=$.abiItem.inputs?.some(R=>!("name"in R&&R.name))}const N=Se(v,{args:E?[]:{},eventName:k});a([N])}},onError(x){c?.(x)}});P=y,g||P()}catch(B){c?.(B)}})(),()=>P()})()}function ol(e,{batch:t=!0,onError:n,onTransactions:r,poll:s,pollingInterval:o=e.pollingInterval}){return(typeof s<"u"?s:e.transport.type!=="webSocket"&&e.transport.type!=="ipc")?(()=>{const u=ge(["watchPendingTransactions",e.uid,t,o]);return Te(u,{onTransactions:r,onError:n},f=>{let d;const l=ct(async()=>{try{if(!d)try{d=await _(e,wi,"createPendingTransactionFilter")({});return}catch(m){throw l(),m}const b=await _(e,on,"getFilterChanges")({filter:d});if(b.length===0)return;if(t)f.onTransactions(b);else for(const m of b)f.onTransactions([m])}catch(b){f.onError?.(b)}},{emitOnBegin:!0,interval:o});return async()=>{d&&await _(e,an,"uninstallFilter")({filter:d}),l()}})})():(()=>{let u=!0,f=()=>u=!1;return(async()=>{try{const{unsubscribe:d}=await e.transport.subscribe({params:["newPendingTransactions"],onData(l){if(!u)return;const b=l.result;r([b])},onError(l){n?.(l)}});f=d,u||f()}catch(d){n?.(d)}})(),()=>f()})()}function il(e){const{scheme:t,statement:n,...r}=e.match(al)?.groups??{},{chainId:s,expirationTime:o,issuedAt:i,notBefore:c,requestId:a,...u}=e.match(cl)?.groups??{},f=e.split("Resources:")[1]?.split(`
- `).slice(1);return{...r,...u,...s?{chainId:Number(s)}:{},...o?{expirationTime:new Date(o)}:{},...i?{issuedAt:new Date(i)}:{},...c?{notBefore:new Date(c)}:{},...a?{requestId:a}:{},...f?{resources:f}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}const al=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,cl=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function ul(e){const{address:t,domain:n,message:r,nonce:s,scheme:o,time:i=new Date}=e;if(n&&r.domain!==n||s&&r.nonce!==s||o&&r.scheme!==o||r.expirationTime&&i>=r.expirationTime||r.notBefore&&i<r.notBefore)return!1;try{if(!r.address||!se(r.address,{strict:!1})||t&&!Qt(r.address,t))return!1}catch{return!1}return!0}async function fl(e,t){const{address:n,domain:r,message:s,nonce:o,scheme:i,signature:c,time:a=new Date,...u}=t,f=il(s);if(!f.address||!ul({address:n,domain:r,message:f,nonce:o,scheme:i,time:a}))return!1;const l=ao(s);return ln(e,{address:f.address,hash:l,signature:c,...u})}async function dl(e,{serializedTransaction:t,throwOnReceiptRevert:n,timeout:r}){const s=await e.request({method:"eth_sendRawTransactionSync",params:r?[t,T(r)]:[t]},{retryCount:0}),i=(e.chain?.formatters?.transactionReceipt?.format||Sr)(s);if(i.status==="reverted"&&n)throw new U0({receipt:i});return i}function ll(e){return{call:t=>sn(e,t),createAccessList:t=>yi(e,t),createBlockFilter:()=>Du(e),createContractEventFilter:t=>go(e,t),createEventFilter:t=>gi(e,t),createPendingTransactionFilter:()=>wi(e),estimateContractGas:t=>wc(e,t),estimateGas:t=>gr(e,t),getBalance:t=>Vu(e,t),getBlobBaseFee:()=>qu(e),getBlock:t=>ie(e,t),getBlockNumber:t=>Nt(e,t),getBlockTransactionCount:t=>Zu(e,t),getBytecode:t=>qn(e,t),getChainId:()=>yr(e),getCode:t=>qn(e,t),getContractEvents:t=>Vo(e,t),getEip712Domain:t=>Ku(e,t),getEnsAddress:t=>Su(e,t),getEnsAvatar:t=>Gu(e,t),getEnsName:t=>Hu(e,t),getEnsResolver:t=>ju(e,t),getEnsText:t=>mi(e,t),getFeeHistory:t=>Xu(e,t),estimateFeesPerGas:t=>rc(e,t),getFilterChanges:t=>on(e,t),getFilterLogs:t=>Qu(e,t),getGasPrice:()=>br(e),getLogs:t=>vr(e,t),getProof:t=>Fd(e,t),estimateMaxPriorityFeePerGas:t=>nc(e,t),fillTransaction:t=>jo(e,t),getStorageAt:t=>Cd(e,t),getTransaction:t=>jr(e,t),getTransactionConfirmations:t=>Rd(e,t),getTransactionCount:t=>Ro(e,t),getTransactionReceipt:t=>Rt(e,t),multicall:t=>zd(e,t),prepareTransactionRequest:t=>Do(e,t),readContract:t=>de(e,t),sendRawTransaction:t=>pu(e,t),sendRawTransactionSync:t=>dl(e,t),simulate:t=>er(e,t),simulateBlocks:t=>er(e,t),simulateCalls:t=>Vd(e,t),simulateContract:t=>au(e,t),verifyHash:t=>ln(e,t),verifyMessage:t=>el(e,t),verifySiweMessage:t=>fl(e,t),verifyTypedData:t=>tl(e,t),uninstallFilter:t=>an(e,t),waitForTransactionReceipt:t=>nl(e,t),watchBlocks:t=>rl(e,t),watchBlockNumber:t=>Wi(e,t),watchContractEvent:t=>hu(e,t),watchEvent:t=>sl(e,t),watchPendingTransactions:t=>ol(e,t)}}function Tl(e){const{key:t="public",name:n="Public Client"}=e;return vu({...e,key:t,name:n,type:"publicClient"}).extend(ll)}function Nl(e){const{r:t,s:n}=Mr.Signature.fromCompact(e.slice(2,130)),r=+`0x${e.slice(130)}`,[s,o]=(()=>{if(r===0||r===1)return[void 0,r];if(r===27)return[BigInt(r),0];if(r===28)return[BigInt(r),1];throw new Error("Invalid yParityOrV value")})();return typeof s<"u"?{r:T(t,{size:32}),s:T(n,{size:32}),v:s,yParity:o}:{r:T(t,{size:32}),s:T(n,{size:32}),yParity:o}}export{ll as $,vu as A,Tl as B,G0 as C,El as D,Pu as E,Nl as F,Bl as G,Bt as H,cn as I,Bu as J,sn as K,t0 as L,Da as M,Za as N,Xa as O,Ja as P,Ya as Q,Wa as R,n0 as S,ot as T,e0 as U,us as V,fs as W,Ka as X,Qa as Y,Va as Z,xu as _,yr as a,nf as a$,jd as a0,pe as a1,ci as a2,tu as a3,nu as a4,Jt as a5,ko as a6,mu as a7,Dn as a8,ui as a9,Eu as aA,xr as aB,hr as aC,pr as aD,_o as aE,lc as aF,Go as aG,mc as aH,at as aI,v0 as aJ,P0 as aK,Ee as aL,E0 as aM,$u as aN,Vn as aO,rt as aP,lr as aQ,Fo as aR,At as aS,J0 as aT,dc as aU,lu as aV,Ao as aW,V0 as aX,Yd as aY,it as aZ,Cr as a_,rn as aa,Bo as ab,H0 as ac,Wt as ad,dt as ae,Nu as af,kr as ag,K0 as ah,No as ai,dr as aj,ec as ak,m0 as al,F0 as am,C0 as an,z0 as ao,_0 as ap,O0 as aq,L0 as ar,Po as as,Eo as at,M0 as au,wr as av,qe as aw,$r as ax,Ts as ay,Et as az,Ro as b,rf as b0,Ho as b1,un as b2,cr as b3,gl as c,Pl as d,wl as e,Xt as f,_ as g,Al as h,Qt as i,Sl as j,qn as k,yo as l,It as m,k0 as n,Gn as o,Q as p,Io as q,de as r,Il as s,Ge as t,rc as u,fr as v,Se as w,Sr as x,Te as y,ct as z};
